2021-01-08T21:44:04.129566400Z Traceback (most recent call last):
2021-01-08T21:44:04.129884400Z   File "/tmp/entrypoint.py", line 82, in <module>
2021-01-08T21:44:04.129916900Z     main()
2021-01-08T21:44:04.129946500Z   File "/tmp/entrypoint.py", line 78, in main
2021-01-08T21:44:04.129975800Z     run_model(options.script, *options.args)
2021-01-08T21:44:04.130005100Z   File "/tmp/entrypoint.py", line 41, in run_model
2021-01-08T21:44:04.130035400Z     return check_output(log_file)
2021-01-08T21:44:04.130064900Z   File "/tmp/entrypoint.py", line 56, in check_output
2021-01-08T21:44:04.130094300Z     raise RuntimeError(f"Problem found running stata script:\n\n{output}")
2021-01-08T21:44:04.130125200Z RuntimeError: Problem found running stata script:
2021-01-08T21:44:04.130155400Z 
2021-01-08T21:44:04.130184900Z 
2021-01-08T21:44:04.130214300Z   ___  ____  ____  ____  ____ (R)
2021-01-08T21:44:04.130243500Z  /__    /   ____/   /   ____/
2021-01-08T21:44:04.130273200Z ___/   /   /___/   /   /___/   16.1   Copyright 1985-2019 StataCorp LLC
2021-01-08T21:44:04.130302700Z   Statistics/Data Analysis            StataCorp
2021-01-08T21:44:04.130332000Z                                       4905 Lakeway Drive
2021-01-08T21:44:04.130361400Z      MP - Parallel Edition            College Station, Texas 77845 USA
2021-01-08T21:44:04.130391600Z                                       800-STATA-PC        http://www.stata.com
2021-01-08T21:44:04.130436500Z                                       979-696-4600        stata@stata.com
2021-01-08T21:44:04.130468400Z                                       979-696-4601 (fax)
2021-01-08T21:44:04.130498900Z 
2021-01-08T21:44:04.130529100Z 3-user 32-core Stata network license expires 29 Apr 2021:
2021-01-08T21:44:04.130559500Z        Serial number:  501609309502
2021-01-08T21:44:04.130590400Z          Licensed to:  EBM DataLab
2021-01-08T21:44:04.130621000Z                        University of Oxford
2021-01-08T21:44:04.130652200Z 
2021-01-08T21:44:04.130682300Z Notes:
2021-01-08T21:44:04.130713100Z       1.  Stata is running in batch mode.
2021-01-08T21:44:04.130744000Z Some Unicode string functions will not behave correctly because ICU data file
2021-01-08T21:44:04.130776400Z     icudt54l.dat cannot be found at directory: "/usr/local/stata/utilities"
2021-01-08T21:44:04.130913600Z       2.  Unicode is supported; see help unicode_advice.
2021-01-08T21:44:04.131033900Z       3.  More than 2 billion observations are allowed; see help obs_advice.
2021-01-08T21:44:04.131065200Z       4.  Maximum number of variables is set to 5000; see help set_maxvar.
2021-01-08T21:44:04.131203200Z 
2021-01-08T21:44:04.131234100Z . do analysis/01_eth_cr_analysis_dataset.do 
2021-01-08T21:44:04.131516600Z 
2021-01-08T21:44:04.131718800Z . /*===========================================================================
2021-01-08T21:44:04.131747200Z > ===
2021-01-08T21:44:04.131772900Z > DO FILE NAME:                   00_cr_analysis_dataset
2021-01-08T21:44:04.131902800Z > PROJECT:                                Ethnicity and COVID outcomes
2021-01-08T21:44:04.131928800Z > DATE:                                   12th July 2020 
2021-01-08T21:44:04.131958000Z > AUTHOR:                                 Rohini Mathur adapted from H Forbes, 
2021-01-08T21:44:04.132100600Z > A Wong, A Schultze, C Rentsch,K Baskharan, E Williamson                      
2021-01-08T21:44:04.132136300Z >                                                       
2021-01-08T21:44:04.132270700Z > DESCRIPTION OF FILE:    program 00, data management for project  
2021-01-08T21:44:04.132301600Z >                                                 reformat variables 
2021-01-08T21:44:04.132332400Z >                                                 categorise variables
2021-01-08T21:44:04.132466700Z >                                                 label variables 
2021-01-08T21:44:04.132496800Z >                                                 apply exclusion criteria
2021-01-08T21:44:04.132607900Z > DATASETS USED:                  data in memory (from analysis/input.csv)
2021-01-08T21:44:04.132722700Z > DATASETS CREATED:               none
2021-01-08T21:44:04.132825600Z > OTHER OUTPUT:                   logfiles, printed to folder analysis/$logdir 
2021-01-08T21:44:04.132854000Z >                                                    
2021-01-08T21:44:04.132975800Z > =============================================================================
2021-01-08T21:44:04.133001500Z > =*/
2021-01-08T21:44:04.133028200Z . 
2021-01-08T21:44:04.133155700Z . * Open a log file
2021-01-08T21:44:04.133191900Z . cap log close
2021-01-08T21:44:04.133324700Z 
2021-01-08T21:44:04.133350900Z . log using ./logs/01_eth_cr_analysis_dataset.log, replace t
2021-01-08T21:44:04.133377400Z (note: file /workspace/logs/01_eth_cr_analysis_dataset.log not found)
2021-01-08T21:44:04.133499900Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.133525800Z       name:  <unnamed>
2021-01-08T21:44:04.133551700Z        log:  /workspace/logs/01_eth_cr_analysis_dataset.log
2021-01-08T21:44:04.133712600Z   log type:  text
2021-01-08T21:44:04.133738400Z  opened on:   8 Jan 2021, 21:43:40
2021-01-08T21:44:04.133764200Z 
2021-01-08T21:44:04.133886700Z . 
2021-01-08T21:44:04.133912300Z . clear
2021-01-08T21:44:04.133937600Z 
2021-01-08T21:44:04.134065800Z . import delimited ./output/input.csv
2021-01-08T21:44:04.134106600Z (80 vars, 100,000 obs)
2021-01-08T21:44:04.134229900Z 
2021-01-08T21:44:04.134257100Z . 
2021-01-08T21:44:04.134282300Z . di "STARTING safecount FROM IMPORT:"
2021-01-08T21:44:04.134405200Z STARTING safecount FROM IMPORT:
2021-01-08T21:44:04.134431400Z 
2021-01-08T21:44:04.134456600Z . safecount
2021-01-08T21:44:04.134558800Z   100,000
2021-01-08T21:44:04.134584400Z 
2021-01-08T21:44:04.134609700Z . 
2021-01-08T21:44:04.134717200Z . ****************************
2021-01-08T21:44:04.134790800Z . *  Create required cohort  *
2021-01-08T21:44:04.134816300Z . ****************************
2021-01-08T21:44:04.134845500Z . 
2021-01-08T21:44:04.134966800Z . /* DROP ALL KIDS */
2021-01-08T21:44:04.134992300Z . noi di "DROPPING AGE<18:" 
2021-01-08T21:44:04.135019200Z DROPPING AGE<18:
2021-01-08T21:44:04.135146900Z 
2021-01-08T21:44:04.135172200Z . drop if age<18
2021-01-08T21:44:04.135198300Z (21,121 observations deleted)
2021-01-08T21:44:04.135319200Z 
2021-01-08T21:44:04.135344900Z . safecount
2021-01-08T21:44:04.135370100Z   78,879
2021-01-08T21:44:04.135492800Z 
2021-01-08T21:44:04.135518500Z . 
2021-01-08T21:44:04.135543800Z . * Age: Exclude those with implausible ages
2021-01-08T21:44:04.135711700Z . cap assert age<.
2021-01-08T21:44:04.135746800Z 
2021-01-08T21:44:04.135823400Z . noi di "DROPPING AGE<105:" 
2021-01-08T21:44:04.135895100Z DROPPING AGE<105:
2021-01-08T21:44:04.135920700Z 
2021-01-08T21:44:04.135947300Z . drop if age>105
2021-01-08T21:44:04.136074900Z (14 observations deleted)
2021-01-08T21:44:04.136100500Z 
2021-01-08T21:44:04.136126800Z . safecount
2021-01-08T21:44:04.136254600Z   78,865
2021-01-08T21:44:04.136280300Z 
2021-01-08T21:44:04.136306400Z . 
2021-01-08T21:44:04.136443600Z . * Sex: Exclude categories other than M and F
2021-01-08T21:44:04.136468300Z . cap assert inlist(sex, "M", "F", "I", "U")
2021-01-08T21:44:04.136493300Z 
2021-01-08T21:44:04.136588900Z . noi di "DROPPING GENDER NOT M/F:" 
2021-01-08T21:44:04.136616800Z DROPPING GENDER NOT M/F:
2021-01-08T21:44:04.136754800Z 
2021-01-08T21:44:04.136779600Z . drop if inlist(sex, "I", "U")
2021-01-08T21:44:04.136803900Z (0 observations deleted)
2021-01-08T21:44:04.136922900Z 
2021-01-08T21:44:04.136948000Z . 
2021-01-08T21:44:04.136983400Z . gen male = 1 if sex == "M"
2021-01-08T21:44:04.137106800Z (40,310 missing values generated)
2021-01-08T21:44:04.137131500Z 
2021-01-08T21:44:04.137156200Z . replace male = 0 if sex == "F"
2021-01-08T21:44:04.137276400Z (40,310 real changes made)
2021-01-08T21:44:04.137310300Z 
2021-01-08T21:44:04.137336000Z . label define male 0"Female" 1"Male"
2021-01-08T21:44:04.137454000Z 
2021-01-08T21:44:04.137478600Z . label values male male
2021-01-08T21:44:04.137503500Z 
2021-01-08T21:44:04.137599200Z . safetab male
2021-01-08T21:44:04.137729600Z 0
2021-01-08T21:44:04.137818700Z 
2021-01-08T21:44:04.137843500Z        male |      Freq.     Percent        Cum.
2021-01-08T21:44:04.137984000Z ------------+-----------------------------------
2021-01-08T21:44:04.138009000Z      Female |     40,310       51.11       51.11
2021-01-08T21:44:04.138069500Z        Male |     38,555       48.89      100.00
2021-01-08T21:44:04.138297100Z ------------+-----------------------------------
2021-01-08T21:44:04.138761700Z       Total |     78,865      100.00
2021-01-08T21:44:04.138795100Z 
2021-01-08T21:44:04.138823100Z . safecount
2021-01-08T21:44:04.138962800Z   78,865
2021-01-08T21:44:04.138990500Z 
2021-01-08T21:44:04.139120400Z . 
2021-01-08T21:44:04.139148400Z . /*  IMD  */
2021-01-08T21:44:04.139183700Z . * Group into 5 groups
2021-01-08T21:44:04.139335400Z . rename imd imd_o
2021-01-08T21:44:04.139364700Z 
2021-01-08T21:44:04.139397300Z . egen imd = cut(imd_o), group(5) icodes
2021-01-08T21:44:04.139532700Z 
2021-01-08T21:44:04.139563000Z . 
2021-01-08T21:44:04.139593100Z . * add one to create groups 1 - 5 
2021-01-08T21:44:04.139779000Z . replace imd = imd + 1
2021-01-08T21:44:04.139814800Z (78,865 real changes made)
2021-01-08T21:44:04.139846400Z 
2021-01-08T21:44:04.139876200Z . 
2021-01-08T21:44:04.139906700Z . * - 1 is missing, should be excluded from population 
2021-01-08T21:44:04.140089500Z . replace imd = .u if imd_o == -1
2021-01-08T21:44:04.140119400Z (0 real changes made)
2021-01-08T21:44:04.140148800Z 
2021-01-08T21:44:04.140178400Z . drop imd_o
2021-01-08T21:44:04.140207700Z 
2021-01-08T21:44:04.140237700Z . 
2021-01-08T21:44:04.140268200Z . * Reverse the order (so high is more deprived)
2021-01-08T21:44:04.140408900Z . recode imd 5 = 1 4 = 2 3 = 3 2 = 4 1 = 5 .u = .u
2021-01-08T21:44:04.140438700Z (imd: 78865 changes made)
2021-01-08T21:44:04.140485900Z 
2021-01-08T21:44:04.140515100Z . 
2021-01-08T21:44:04.140543600Z . label define imd 1 "1 least deprived" 2 "2" 3 "3" 4 "4" 5 "5 most deprived" .
2021-01-08T21:44:04.140573600Z > u "Unknown"
2021-01-08T21:44:04.140603700Z 
2021-01-08T21:44:04.140634100Z . label values imd imd 
2021-01-08T21:44:04.140662800Z 
2021-01-08T21:44:04.140842800Z . safetab imd, m
2021-01-08T21:44:04.140872900Z 4
2021-01-08T21:44:04.140901800Z 
2021-01-08T21:44:04.140930800Z              imd |      Freq.     Percent        Cum.
2021-01-08T21:44:04.140959800Z -----------------+-----------------------------------
2021-01-08T21:44:04.140989100Z 1 least deprived |     55,420       70.27       70.27
2021-01-08T21:44:04.141018900Z                4 |     15,643       19.84       90.11
2021-01-08T21:44:04.141047500Z  5 most deprived |      7,802        9.89      100.00
2021-01-08T21:44:04.141076600Z -----------------+-----------------------------------
2021-01-08T21:44:04.141106200Z            Total |     78,865      100.00
2021-01-08T21:44:04.141134900Z 
2021-01-08T21:44:04.141164100Z . 
2021-01-08T21:44:04.141192700Z . drop if imd==.u
2021-01-08T21:44:04.141223500Z (0 observations deleted)
2021-01-08T21:44:04.141405800Z 
2021-01-08T21:44:04.141432900Z . safecount
2021-01-08T21:44:04.141457600Z   78,865
2021-01-08T21:44:04.141482000Z 
2021-01-08T21:44:04.141506200Z . 
2021-01-08T21:44:04.141530500Z . 
2021-01-08T21:44:04.141554900Z . * Create restricted cubic splines for age
2021-01-08T21:44:04.141579400Z . mkspline age = age, cubic nknots(4)
2021-01-08T21:44:04.141603700Z 
2021-01-08T21:44:04.141628000Z . 
2021-01-08T21:44:04.141652200Z . *Start dates
2021-01-08T21:44:04.141757700Z . gen index                       = "01/02/2020"
2021-01-08T21:44:04.141818200Z 
2021-01-08T21:44:04.141842800Z . 
2021-01-08T21:44:04.141871800Z . * Date of cohort entry, 1 Feb 2020
2021-01-08T21:44:04.141896700Z . gen indexdate = date(index, "DMY")
2021-01-08T21:44:04.141921300Z 
2021-01-08T21:44:04.141945500Z . format indexdate %d
2021-01-08T21:44:04.141969900Z 
2021-01-08T21:44:04.141994000Z . 
2021-01-08T21:44:04.142018200Z . 
2021-01-08T21:44:04.142042600Z . *****************************************************************************
2021-01-08T21:44:04.142067200Z > **
2021-01-08T21:44:04.142091600Z . 
2021-01-08T21:44:04.142115800Z . 
2021-01-08T21:44:04.142149700Z . 
2021-01-08T21:44:04.142174400Z . /* CREATE VARIABLES==========================================================
2021-01-08T21:44:04.142199100Z > =*/
2021-01-08T21:44:04.142223500Z . 
2021-01-08T21:44:04.142247800Z . /* OUTCOME AND SURVIVAL TIME=================================================
2021-01-08T21:44:04.142272300Z > =*/
2021-01-08T21:44:04.142296600Z . 
2021-01-08T21:44:04.142320900Z .         
2021-01-08T21:44:04.142345300Z . /****   Outcome definitions   ****/
2021-01-08T21:44:04.142374900Z . ren primary_care_suspect_case   suspected_date
2021-01-08T21:44:04.142414500Z 
2021-01-08T21:44:04.142439000Z . ren primary_care_case                   confirmed_date
2021-01-08T21:44:04.142463500Z 
2021-01-08T21:44:04.142487700Z . ren first_tested_for_covid              tested_date
2021-01-08T21:44:04.142512100Z 
2021-01-08T21:44:04.142536300Z . ren first_positive_test_date    positivetest_date
2021-01-08T21:44:04.142560700Z 
2021-01-08T21:44:04.142585100Z . ren a_e_consult_date                    ae_date
2021-01-08T21:44:04.142609500Z 
2021-01-08T21:44:04.142633700Z . ren icu_date_admitted                   icu_date
2021-01-08T21:44:04.142658100Z 
2021-01-08T21:44:04.142682400Z . ren died_date_cpns                              cpnsdeath_date
2021-01-08T21:44:04.142706800Z 
2021-01-08T21:44:04.142731000Z . ren died_date_ons                               onsdeath_date
2021-01-08T21:44:04.142755500Z 
2021-01-08T21:44:04.142779700Z . ren covid_admission_date                hes_date
2021-01-08T21:44:04.142804100Z 
2021-01-08T21:44:04.142925600Z . 
2021-01-08T21:44:04.142961400Z . * Date of Covid death in ONS
2021-01-08T21:44:04.142987200Z . gen onscoviddeath_date = onsdeath_date if died_ons_covid_flag_any == 1
2021-01-08T21:44:04.143036000Z (75,671 missing values generated)
2021-01-08T21:44:04.143060500Z 
2021-01-08T21:44:04.143084700Z . gen onsconfirmeddeath_date = onsdeath_date if died_ons_confirmedcovid_flag_an
2021-01-08T21:44:04.143109200Z > y ==1
2021-01-08T21:44:04.143133800Z (75,730 missing values generated)
2021-01-08T21:44:04.143158000Z 
2021-01-08T21:44:04.143183200Z . gen onssuspecteddeath_date = onsdeath_date if died_ons_suspectedcovid_flag_an
2021-01-08T21:44:04.143280700Z > y ==1
2021-01-08T21:44:04.143305400Z (75,701 missing values generated)
2021-01-08T21:44:04.143329700Z 
2021-01-08T21:44:04.143353900Z . 
2021-01-08T21:44:04.143378500Z . * Date of non-COVID death in ONS 
2021-01-08T21:44:04.143402800Z . * If missing date of death resulting died_date will also be missing
2021-01-08T21:44:04.143434700Z . gen ons_noncoviddeath_date = onsdeath_date if died_ons_covid_flag_any != 1
2021-01-08T21:44:04.143459400Z (66,300 missing values generated)
2021-01-08T21:44:04.143483500Z 
2021-01-08T21:44:04.143507800Z . 
2021-01-08T21:44:04.143531800Z . 
2021-01-08T21:44:04.143556000Z . /* CONVERT STRINGS TO DATE FOR OUTCOME VARIABLES ============================
2021-01-08T21:44:04.143580500Z > =*/
2021-01-08T21:44:04.143604800Z . * Recode to dates from the strings 
2021-01-08T21:44:04.143629100Z . *gen dummy date for infected and replace later on
2021-01-08T21:44:04.143653300Z . 
2021-01-08T21:44:04.143677500Z . foreach var of global outcomes {
2021-01-08T21:44:04.143702800Z   2.         confirm string variable `var'_date
2021-01-08T21:44:04.143907800Z   3.         rename `var'_date `var'_dstr
2021-01-08T21:44:04.143933200Z   4.         gen `var'_date = date(`var'_dstr, "YMD")
2021-01-08T21:44:04.143958100Z   5.         drop `var'_dstr
2021-01-08T21:44:04.143982600Z   6.         format `var'_date %td 
2021-01-08T21:44:04.144006900Z   7. 
2021-01-08T21:44:04.144031100Z . }
2021-01-08T21:44:04.144055400Z 
2021-01-08T21:44:04.144079700Z . 
2021-01-08T21:44:04.144103900Z . *If outcome occurs on the first day of follow-up add one day
2021-01-08T21:44:04.144128300Z . foreach i of global outcomes {
2021-01-08T21:44:04.144152700Z   2.         di "`i'"
2021-01-08T21:44:04.144177200Z   3.         count if `i'_date==indexdate
2021-01-08T21:44:04.144201600Z   4.         replace `i'_date=`i'_date+1 if `i'_date==indexdate
2021-01-08T21:44:04.144226100Z   5. }
2021-01-08T21:44:04.144250400Z 
2021-01-08T21:44:04.144274500Z . *date of deregistration
2021-01-08T21:44:04.144298900Z . rename dereg_date dereg_dstr
2021-01-08T21:44:04.144323200Z 
2021-01-08T21:44:04.144347400Z .         gen dereg_date = date(dereg_dstr, "YMD")
2021-01-08T21:44:04.144371900Z (78,865 missing values generated)
2021-01-08T21:44:04.144396200Z 
2021-01-08T21:44:04.144420500Z .         drop dereg_dstr
2021-01-08T21:44:04.144444600Z 
2021-01-08T21:44:04.144468800Z .         format dereg_date %td 
2021-01-08T21:44:04.144493000Z 
2021-01-08T21:44:04.144517300Z . 
2021-01-08T21:44:04.144541600Z . * Binary indicators for outcomes
2021-01-08T21:44:04.144565900Z . foreach i of global outcomes {
2021-01-08T21:44:04.144592000Z   2.                 gen `i'=0
2021-01-08T21:44:04.144616600Z   3.                 replace  `i'=1 if `i'_date < .
2021-01-08T21:44:04.144648800Z   4.                 safetab `i'
2021-01-08T21:44:04.144673500Z   5. }
2021-01-08T21:44:04.144697700Z 
2021-01-08T21:44:04.144721800Z . 
2021-01-08T21:44:04.144746000Z . 
2021-01-08T21:44:04.144770300Z . /* CENSORING */
2021-01-08T21:44:04.144794900Z . /* SET FU DATES==============================================================
2021-01-08T21:44:04.144914600Z > =*/ 
2021-01-08T21:44:04.144949100Z . 
2021-01-08T21:44:04.145050300Z . * Censoring dates for each outcome (last date outcome data available)
2021-01-08T21:44:04.145076100Z . *https://github.com/opensafely/rapid-reports/blob/master/notebooks/latest-dat
2021-01-08T21:44:04.145100900Z > es.ipynb
2021-01-08T21:44:04.145125600Z . gen tested_censor_date = d("03/08/2020")
2021-01-08T21:44:04.145151100Z 
2021-01-08T21:44:04.145175600Z . gen positivetest_censor_date = d("03/08/2020")
2021-01-08T21:44:04.145200300Z 
2021-01-08T21:44:04.145224500Z . gen ae_censor_date = d("03/08/2020")
2021-01-08T21:44:04.145248900Z 
2021-01-08T21:44:04.145273200Z . gen hes_censor_date = d("03/08/2020")
2021-01-08T21:44:04.145297600Z 
2021-01-08T21:44:04.145321700Z . gen icu_censor_date = d("30/07/2020")
2021-01-08T21:44:04.145346000Z 
2021-01-08T21:44:04.145370200Z . gen cpnsdeath_censor_date  = d("03/08/2020")
2021-01-08T21:44:04.145394700Z 
2021-01-08T21:44:04.145419100Z . gen onsdeath_censor_date = d("03/08/2020")
2021-01-08T21:44:04.145443600Z 
2021-01-08T21:44:04.145467700Z . gen onscoviddeath_censor_date = d("03/08/2020")
2021-01-08T21:44:04.145492100Z 
2021-01-08T21:44:04.145516300Z . gen ons_noncoviddeath_censor_date = d("03/08/2020")
2021-01-08T21:44:04.145540600Z 
2021-01-08T21:44:04.145564900Z . gen onsconfirmeddeath_censor_date=d("03/08/2020")
2021-01-08T21:44:04.145589300Z 
2021-01-08T21:44:04.145613500Z . 
2021-01-08T21:44:04.145637600Z . *****************************************************************************
2021-01-08T21:44:04.145662200Z > **
2021-01-08T21:44:04.145686500Z . format *censor_date %d
2021-01-08T21:44:04.145710600Z 
2021-01-08T21:44:04.145734700Z . sum *censor_date, format
2021-01-08T21:44:04.145758900Z 
2021-01-08T21:44:04.145792600Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.145817400Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.145991400Z tested_cen~e |     78,865   03aug2020           0  03aug2020  03aug2020
2021-01-08T21:44:04.146016900Z posit~r_date |     78,865   03aug2020           0  03aug2020  03aug2020
2021-01-08T21:44:04.146052200Z ae_censor_~e |     78,865   03aug2020           0  03aug2020  03aug2020
2021-01-08T21:44:04.146079200Z hes_censor~e |     78,865   03aug2020           0  03aug2020  03aug2020
2021-01-08T21:44:04.146103800Z icu_censor~e |     78,865   30jul2020           0  30jul2020  30jul2020
2021-01-08T21:44:04.146128100Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.146152500Z cpnsd~r_date |     78,865   03aug2020           0  03aug2020  03aug2020
2021-01-08T21:44:04.146176900Z onsdeath_c~e |     78,865   03aug2020           0  03aug2020  03aug2020
2021-01-08T21:44:04.146201100Z onscovidde.. |     78,865   03aug2020           0  03aug2020  03aug2020
2021-01-08T21:44:04.146225600Z ons_n~r_date |     78,865   03aug2020           0  03aug2020  03aug2020
2021-01-08T21:44:04.146249800Z onsconfirm.. |     78,865   03aug2020           0  03aug2020  03aug2020
2021-01-08T21:44:04.146274100Z 
2021-01-08T21:44:04.146298200Z . 
2021-01-08T21:44:04.146322600Z . 
2021-01-08T21:44:04.146359900Z . /* DEMOGRAPHICS */ 
2021-01-08T21:44:04.146383300Z . 
2021-01-08T21:44:04.146406500Z . * Ethnicity (5 category)
2021-01-08T21:44:04.146431100Z . label define ethnicity  1 "White"                                       ///
2021-01-08T21:44:04.146455000Z >                                                 2 "Mixed"                    
2021-01-08T21:44:04.146478700Z >                    ///
2021-01-08T21:44:04.146502200Z >                                                 3 "Asian or Asian British"   
2021-01-08T21:44:04.146526000Z >    ///
2021-01-08T21:44:04.146549400Z >                                                 4 "Black"                    
2021-01-08T21:44:04.146572900Z >                    ///
2021-01-08T21:44:04.146596300Z >                                                 5 "Other"                    
2021-01-08T21:44:04.146619800Z >                    
2021-01-08T21:44:04.146643200Z 
2021-01-08T21:44:04.146666500Z .                                                 
2021-01-08T21:44:04.146689900Z . label values ethnicity ethnicity
2021-01-08T21:44:04.146713200Z 
2021-01-08T21:44:04.146736500Z . safetab ethnicity, m
2021-01-08T21:44:04.146891900Z 10
2021-01-08T21:44:04.146928500Z 
2021-01-08T21:44:04.146957200Z              ethnicity |      Freq.     Percent        Cum.
2021-01-08T21:44:04.146981100Z -----------------------+-----------------------------------
2021-01-08T21:44:04.147004600Z                  White |     11,621       14.74       14.74
2021-01-08T21:44:04.147028100Z                  Mixed |     11,860       15.04       29.77
2021-01-08T21:44:04.147051600Z Asian or Asian British |     12,037       15.26       45.04
2021-01-08T21:44:04.147082000Z                  Black |     11,940       15.14       60.18
2021-01-08T21:44:04.147105800Z                  Other |     11,783       14.94       75.12
2021-01-08T21:44:04.147129300Z                      . |     19,624       24.88      100.00
2021-01-08T21:44:04.147152700Z -----------------------+-----------------------------------
2021-01-08T21:44:04.147176200Z                  Total |     78,865      100.00
2021-01-08T21:44:04.147199600Z 
2021-01-08T21:44:04.147222900Z . 
2021-01-08T21:44:04.147246300Z .  *re-order ethnicity
2021-01-08T21:44:04.147269600Z .  gen eth5=1 if ethnicity==1
2021-01-08T21:44:04.147293000Z (67,244 missing values generated)
2021-01-08T21:44:04.147316900Z 
2021-01-08T21:44:04.147354300Z .  replace eth5=2 if ethnicity==3
2021-01-08T21:44:04.147401000Z (12,037 real changes made)
2021-01-08T21:44:04.147446600Z 
2021-01-08T21:44:04.147543600Z .  replace eth5=3 if ethnicity==4
2021-01-08T21:44:04.147571000Z (11,940 real changes made)
2021-01-08T21:44:04.147596000Z 
2021-01-08T21:44:04.147619600Z .  replace eth5=4 if ethnicity==2
2021-01-08T21:44:04.147643200Z (11,860 real changes made)
2021-01-08T21:44:04.147666800Z 
2021-01-08T21:44:04.147690000Z .  replace eth5=5 if ethnicity==5
2021-01-08T21:44:04.147713600Z (11,783 real changes made)
2021-01-08T21:44:04.147737000Z 
2021-01-08T21:44:04.147760400Z .  replace eth5=6 if ethnicity==.
2021-01-08T21:44:04.147784000Z (19,624 real changes made)
2021-01-08T21:44:04.147810600Z 
2021-01-08T21:44:04.147839400Z . 
2021-01-08T21:44:04.147947800Z .  label define eth5              1 "White"                                    
2021-01-08T21:44:04.147971600Z >    ///
2021-01-08T21:44:04.147996900Z >                                                 2 "South Asian"           ///
2021-01-08T21:44:04.148038300Z >                                            
2021-01-08T21:44:04.148062100Z >                                                 3 "Black"                    
2021-01-08T21:44:04.148085700Z >                    ///
2021-01-08T21:44:04.148109100Z >                                                 4 "Mixed"                    
2021-01-08T21:44:04.148132900Z >                    ///
2021-01-08T21:44:04.148156300Z >                                                 5 "Other"                    
2021-01-08T21:44:04.148181500Z >                    ///
2021-01-08T21:44:04.148205400Z >                                                 6 "Unknown"
2021-01-08T21:44:04.148229100Z 
2021-01-08T21:44:04.148252700Z .                                         
2021-01-08T21:44:04.148284200Z . 
2021-01-08T21:44:04.148307900Z . label values eth5 eth5
2021-01-08T21:44:04.148331400Z 
2021-01-08T21:44:04.148354900Z . safetab eth5, m
2021-01-08T21:44:04.148378300Z 5
2021-01-08T21:44:04.148401500Z 
2021-01-08T21:44:04.148424900Z        eth5 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.148448300Z ------------+-----------------------------------
2021-01-08T21:44:04.148471800Z       White |     11,621       14.74       14.74
2021-01-08T21:44:04.148495400Z South Asian |     12,037       15.26       30.00
2021-01-08T21:44:04.148518800Z       Black |     11,940       15.14       45.14
2021-01-08T21:44:04.148542100Z       Mixed |     11,860       15.04       60.18
2021-01-08T21:44:04.148565500Z       Other |     11,783       14.94       75.12
2021-01-08T21:44:04.148589000Z     Unknown |     19,624       24.88      100.00
2021-01-08T21:44:04.148612400Z ------------+-----------------------------------
2021-01-08T21:44:04.148635800Z       Total |     78,865      100.00
2021-01-08T21:44:04.148659200Z 
2021-01-08T21:44:04.148682400Z . 
2021-01-08T21:44:04.148705700Z . * Ethnicity (16 category)
2021-01-08T21:44:04.148729200Z . replace ethnicity_16 = 17 if ethnicity_16==.
2021-01-08T21:44:04.148752500Z (19,674 real changes made)
2021-01-08T21:44:04.149005700Z 
2021-01-08T21:44:04.149030600Z . label define ethnicity_16                                                    
2021-01-08T21:44:04.149054400Z >                    ///
2021-01-08T21:44:04.149078100Z >                                                 1 "British"             ///
2021-01-08T21:44:04.149102400Z >                                                 2 "Irish"                    
2021-01-08T21:44:04.149126100Z >                                    ///
2021-01-08T21:44:04.149149700Z >                                                 3 "Other White"              
2021-01-08T21:44:04.149175900Z >                            ///
2021-01-08T21:44:04.149199800Z >                                                 4 "White + Caribbean"        
2021-01-08T21:44:04.149223700Z >    ///
2021-01-08T21:44:04.149247100Z >                                                 5 "White + African"          
2021-01-08T21:44:04.149270800Z >            ///
2021-01-08T21:44:04.149294200Z >                                                 6 "White + Asian"            
2021-01-08T21:44:04.149318000Z >                            ///
2021-01-08T21:44:04.149341500Z >                                                 7 "Other mixed"              
2021-01-08T21:44:04.149365100Z >                            ///
2021-01-08T21:44:04.149396600Z >                                                 8 "Indian"              ///
2021-01-08T21:44:04.149420800Z >                                                 9 "Pakistani"   ///
2021-01-08T21:44:04.149444500Z >                                                 10 "Bangladeshi" ///
2021-01-08T21:44:04.149468300Z >                                                 11 "Other Asian"             
2021-01-08T21:44:04.149491900Z >                            ///
2021-01-08T21:44:04.149515400Z >                                                 12 "Caribbean"               
2021-01-08T21:44:04.149539100Z >                            ///
2021-01-08T21:44:04.149566000Z >                                                 13 "African"                 
2021-01-08T21:44:04.149590000Z >                            ///
2021-01-08T21:44:04.149613700Z >                                                 14 "Other Black"             
2021-01-08T21:44:04.149637500Z >                            ///
2021-01-08T21:44:04.149661000Z >                                                 15 "Chinese"                 
2021-01-08T21:44:04.149684700Z >                            ///
2021-01-08T21:44:04.149708100Z >                                                 16 "Other"                   
2021-01-08T21:44:04.149892500Z >                                    ///
2021-01-08T21:44:04.150685300Z >                                                 17 "Unknown"
2021-01-08T21:44:04.150709700Z 
2021-01-08T21:44:04.150733300Z .                                                 
2021-01-08T21:44:04.150756900Z . label values ethnicity_16 ethnicity_16
2021-01-08T21:44:04.150780400Z 
2021-01-08T21:44:04.150803900Z . safetab ethnicity_16,m
2021-01-08T21:44:04.150827400Z 13
2021-01-08T21:44:04.150850700Z 
2021-01-08T21:44:04.150873900Z      ethnicity_16 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.150897400Z ------------------+-----------------------------------
2021-01-08T21:44:04.150920900Z           British |      3,738        4.74        4.74
2021-01-08T21:44:04.150944500Z             Irish |      3,639        4.61        9.35
2021-01-08T21:44:04.150968100Z       Other White |      3,578        4.54       13.89
2021-01-08T21:44:04.150991500Z White + Caribbean |      3,678        4.66       18.55
2021-01-08T21:44:04.151015000Z   White + African |      3,740        4.74       23.30
2021-01-08T21:44:04.151040200Z     White + Asian |      3,740        4.74       28.04
2021-01-08T21:44:04.151063900Z       Other mixed |      3,615        4.58       32.62
2021-01-08T21:44:04.151087600Z            Indian |      3,659        4.64       37.26
2021-01-08T21:44:04.151111200Z         Pakistani |      3,686        4.67       41.94
2021-01-08T21:44:04.151143300Z       Bangladeshi |      3,729        4.73       46.66
2021-01-08T21:44:04.151167200Z       Other Asian |      3,746        4.75       51.41
2021-01-08T21:44:04.151190600Z         Caribbean |      3,717        4.71       56.13
2021-01-08T21:44:04.151214300Z           African |      3,719        4.72       60.84
2021-01-08T21:44:04.151237800Z       Other Black |      3,786        4.80       65.64
2021-01-08T21:44:04.151261300Z           Chinese |      3,699        4.69       70.33
2021-01-08T21:44:04.151284800Z             Other |      3,722        4.72       75.05
2021-01-08T21:44:04.151337300Z           Unknown |     19,674       24.95      100.00
2021-01-08T21:44:04.151373400Z ------------------+-----------------------------------
2021-01-08T21:44:04.151397000Z             Total |     78,865      100.00
2021-01-08T21:44:04.151420600Z 
2021-01-08T21:44:04.151444100Z . 
2021-01-08T21:44:04.151467500Z . 
2021-01-08T21:44:04.151490900Z . * Ethnicity (16 category grouped further)
2021-01-08T21:44:04.151524300Z . * Generate a version of the full breakdown with mixed in one group
2021-01-08T21:44:04.151548000Z . gen eth16 = ethnicity_16
2021-01-08T21:44:04.151571500Z 
2021-01-08T21:44:04.151595100Z . recode eth16 4/7 = 99 //mixed
2021-01-08T21:44:04.151618600Z (eth16: 14773 changes made)
2021-01-08T21:44:04.151641900Z 
2021-01-08T21:44:04.151665300Z . recode eth16 8 = 4
2021-01-08T21:44:04.151697600Z (eth16: 3659 changes made)
2021-01-08T21:44:04.151721300Z 
2021-01-08T21:44:04.151747900Z . recode eth16 9 = 5
2021-01-08T21:44:04.151766200Z (eth16: 3686 changes made)
2021-01-08T21:44:04.151783300Z 
2021-01-08T21:44:04.151799600Z . recode eth16 10 = 6
2021-01-08T21:44:04.151821900Z (eth16: 3729 changes made)
2021-01-08T21:44:04.151845100Z 
2021-01-08T21:44:04.151868400Z . recode eth16 11= 7
2021-01-08T21:44:04.151887000Z (eth16: 3746 changes made)
2021-01-08T21:44:04.151910900Z 
2021-01-08T21:44:04.151961800Z . recode eth16 12 = 8
2021-01-08T21:44:04.151985300Z (eth16: 3717 changes made)
2021-01-08T21:44:04.152005600Z 
2021-01-08T21:44:04.152029100Z . recode eth16 13 = 9
2021-01-08T21:44:04.152052800Z (eth16: 3719 changes made)
2021-01-08T21:44:04.152076400Z 
2021-01-08T21:44:04.152100000Z . recode eth16 14 = 10
2021-01-08T21:44:04.152123400Z (eth16: 3786 changes made)
2021-01-08T21:44:04.155559000Z 
2021-01-08T21:44:04.155595100Z . recode eth16 15 = 11
2021-01-08T21:44:04.157128900Z (eth16: 3699 changes made)
2021-01-08T21:44:04.157171100Z 
2021-01-08T21:44:04.157305800Z . recode eth16 99 = 12
2021-01-08T21:44:04.157323400Z (eth16: 14773 changes made)
2021-01-08T21:44:04.157346900Z 
2021-01-08T21:44:04.157492100Z . recode eth16 16 = 13
2021-01-08T21:44:04.157508500Z (eth16: 3722 changes made)
2021-01-08T21:44:04.157530100Z 
2021-01-08T21:44:04.157684700Z . recode eth16 17 = 14
2021-01-08T21:44:04.157783700Z (eth16: 19674 changes made)
2021-01-08T21:44:04.157806700Z 
2021-01-08T21:44:04.157967600Z . 
2021-01-08T21:44:04.157991700Z . label define eth16      ///
2021-01-08T21:44:04.158113400Z >                                                 1 "British" ///
2021-01-08T21:44:04.158137400Z >                                                 2 "Irish" ///
2021-01-08T21:44:04.158160300Z >                                                 3 "Other White" ///
2021-01-08T21:44:04.158260400Z >                                                 4 "Indian" ///
2021-01-08T21:44:04.158306200Z >                                                 5 "Pakistani" ///
2021-01-08T21:44:04.158329300Z >                                                 6 "Bangladeshi" ///     
2021-01-08T21:44:04.158353800Z >                                                 7 "Other Asian" ///
2021-01-08T21:44:04.159967400Z >                                                 8 "Caribbean" ///
2021-01-08T21:44:04.160000300Z >                                                 9 "African" ///
2021-01-08T21:44:04.160140700Z >                                                 10 "Other Black" ///
2021-01-08T21:44:04.160164800Z >                                                 11 "Chinese" ///
2021-01-08T21:44:04.160189300Z >                                                 12 "All mixed" ///
2021-01-08T21:44:04.160294800Z >                                                 13  "Other" ///
2021-01-08T21:44:04.160330200Z >                                                 14 "Unknown"
2021-01-08T21:44:04.160451900Z 
2021-01-08T21:44:04.160476900Z . label values eth16 eth16
2021-01-08T21:44:04.160531000Z 
2021-01-08T21:44:04.160932100Z . safetab eth16,m
2021-01-08T21:44:04.160956700Z 6
2021-01-08T21:44:04.160978700Z 
2021-01-08T21:44:04.161017300Z       eth16 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.161320500Z ------------+-----------------------------------
2021-01-08T21:44:04.161344200Z     British |      3,738        4.74        4.74
2021-01-08T21:44:04.161462000Z       Irish |      3,639        4.61        9.35
2021-01-08T21:44:04.161484800Z Other White |      3,578        4.54       13.89
2021-01-08T21:44:04.161792500Z      Indian |      3,659        4.64       18.53
2021-01-08T21:44:04.161831900Z   Pakistani |      3,686        4.67       23.20
2021-01-08T21:44:04.161966000Z Bangladeshi |      3,729        4.73       27.93
2021-01-08T21:44:04.161989100Z Other Asian |      3,746        4.75       32.68
2021-01-08T21:44:04.164117700Z   Caribbean |      3,717        4.71       37.40
2021-01-08T21:44:04.164165600Z     African |      3,719        4.72       42.11
2021-01-08T21:44:04.164193700Z Other Black |      3,786        4.80       46.91
2021-01-08T21:44:04.164224100Z     Chinese |      3,699        4.69       51.60
2021-01-08T21:44:04.164247400Z   All mixed |     14,773       18.73       70.33
2021-01-08T21:44:04.164271100Z       Other |      3,722        4.72       75.05
2021-01-08T21:44:04.164291500Z     Unknown |     19,674       24.95      100.00
2021-01-08T21:44:04.164316600Z ------------+-----------------------------------
2021-01-08T21:44:04.164344400Z       Total |     78,865      100.00
2021-01-08T21:44:04.164395300Z 
2021-01-08T21:44:04.164433900Z . 
2021-01-08T21:44:04.164460900Z . safetab eth16 eth5, m
2021-01-08T21:44:04.164486600Z 11
2021-01-08T21:44:04.164503500Z 
2021-01-08T21:44:04.164526500Z             |                    eth5
2021-01-08T21:44:04.164549000Z       eth16 |     White  South Asi      Black      Mixed |     Total
2021-01-08T21:44:04.164572100Z ------------+--------------------------------------------+----------
2021-01-08T21:44:04.164594900Z     British |       558        548        555        558 |     3,738 
2021-01-08T21:44:04.164617700Z       Irish |       540        584        525        539 |     3,639 
2021-01-08T21:44:04.164640400Z Other White |       531        538        518        573 |     3,578 
2021-01-08T21:44:04.164663300Z      Indian |       557        573        530        543 |     3,659 
2021-01-08T21:44:04.164686700Z   Pakistani |       576        545        591        540 |     3,686 
2021-01-08T21:44:04.164709600Z Bangladeshi |       574        559        566        553 |     3,729 
2021-01-08T21:44:04.164820300Z Other Asian |       522        556        554        603 |     3,746 
2021-01-08T21:44:04.164848500Z   Caribbean |       534        555        559        561 |     3,717 
2021-01-08T21:44:04.164865200Z     African |       553        578        577        532 |     3,719 
2021-01-08T21:44:04.164888500Z Other Black |       529        546        617        574 |     3,786 
2021-01-08T21:44:04.164915600Z     Chinese |       567        542        568        566 |     3,699 
2021-01-08T21:44:04.164938600Z   All mixed |     2,171      2,282      2,219      2,223 |    14,773 
2021-01-08T21:44:04.164961300Z       Other |       571        584        565        551 |     3,722 
2021-01-08T21:44:04.164983000Z     Unknown |     2,838      3,047      2,996      2,944 |    19,674 
2021-01-08T21:44:04.165102900Z ------------+--------------------------------------------+----------
2021-01-08T21:44:04.165235700Z       Total |    11,621     12,037     11,940     11,860 |    78,865 
2021-01-08T21:44:04.165314200Z 
2021-01-08T21:44:04.165330400Z 
2021-01-08T21:44:04.165353700Z             |         eth5
2021-01-08T21:44:04.165470700Z       eth16 |     Other    Unknown |     Total
2021-01-08T21:44:04.165496100Z ------------+----------------------+----------
2021-01-08T21:44:04.165519000Z     British |       586        933 |     3,738 
2021-01-08T21:44:04.165543300Z       Irish |       555        896 |     3,639 
2021-01-08T21:44:04.165769100Z Other White |       541        877 |     3,578 
2021-01-08T21:44:04.165795000Z      Indian |       560        896 |     3,659 
2021-01-08T21:44:04.165936600Z   Pakistani |       534        900 |     3,686 
2021-01-08T21:44:04.165960000Z Bangladeshi |       522        955 |     3,729 
2021-01-08T21:44:04.165983400Z Other Asian |       613        898 |     3,746 
2021-01-08T21:44:04.166107000Z   Caribbean |       542        966 |     3,717 
2021-01-08T21:44:04.166132700Z     African |       552        927 |     3,719 
2021-01-08T21:44:04.166376200Z Other Black |       600        920 |     3,786 
2021-01-08T21:44:04.166399600Z     Chinese |       557        899 |     3,699 
2021-01-08T21:44:04.166422600Z   All mixed |     2,155      3,723 |    14,773 
2021-01-08T21:44:04.166556000Z       Other |       550        901 |     3,722 
2021-01-08T21:44:04.166574100Z     Unknown |     2,916      4,933 |    19,674 
2021-01-08T21:44:04.166597300Z ------------+----------------------+----------
2021-01-08T21:44:04.166751000Z       Total |    11,783     19,624 |    78,865 
2021-01-08T21:44:04.166774200Z 
2021-01-08T21:44:04.166797600Z . bysort eth5: safetab eth16, m
2021-01-08T21:44:04.166928000Z 
2021-01-08T21:44:04.166955300Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.166988300Z -> eth5 = White
2021-01-08T21:44:04.167103700Z 6
2021-01-08T21:44:04.167133500Z 
2021-01-08T21:44:04.167160200Z       eth16 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.167186800Z ------------+-----------------------------------
2021-01-08T21:44:04.167215000Z     British |        558        4.80        4.80
2021-01-08T21:44:04.167238100Z       Irish |        540        4.65        9.45
2021-01-08T21:44:04.167261100Z Other White |        531        4.57       14.02
2021-01-08T21:44:04.167284000Z      Indian |        557        4.79       18.81
2021-01-08T21:44:04.167306800Z   Pakistani |        576        4.96       23.77
2021-01-08T21:44:04.167329500Z Bangladeshi |        574        4.94       28.71
2021-01-08T21:44:04.167366200Z Other Asian |        522        4.49       33.20
2021-01-08T21:44:04.167389600Z   Caribbean |        534        4.60       37.79
2021-01-08T21:44:04.167412500Z     African |        553        4.76       42.55
2021-01-08T21:44:04.167449100Z Other Black |        529        4.55       47.10
2021-01-08T21:44:04.167471300Z     Chinese |        567        4.88       51.98
2021-01-08T21:44:04.167493200Z   All mixed |      2,171       18.68       70.67
2021-01-08T21:44:04.167515300Z       Other |        571        4.91       75.58
2021-01-08T21:44:04.167537400Z     Unknown |      2,838       24.42      100.00
2021-01-08T21:44:04.167560200Z ------------+-----------------------------------
2021-01-08T21:44:04.167582700Z       Total |     11,621      100.00
2021-01-08T21:44:04.167604700Z 
2021-01-08T21:44:04.167626600Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.167648800Z -> eth5 = South Asian
2021-01-08T21:44:04.167664600Z 6
2021-01-08T21:44:04.167685900Z 
2021-01-08T21:44:04.167707000Z       eth16 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.167728100Z ------------+-----------------------------------
2021-01-08T21:44:04.167749000Z     British |        548        4.55        4.55
2021-01-08T21:44:04.167841500Z       Irish |        584        4.85        9.40
2021-01-08T21:44:04.167868500Z Other White |        538        4.47       13.87
2021-01-08T21:44:04.167890700Z      Indian |        573        4.76       18.63
2021-01-08T21:44:04.167912600Z   Pakistani |        545        4.53       23.16
2021-01-08T21:44:04.167934600Z Bangladeshi |        559        4.64       27.81
2021-01-08T21:44:04.167979700Z Other Asian |        556        4.62       32.43
2021-01-08T21:44:04.168002100Z   Caribbean |        555        4.61       37.04
2021-01-08T21:44:04.168024500Z     African |        578        4.80       41.84
2021-01-08T21:44:04.168046400Z Other Black |        546        4.54       46.37
2021-01-08T21:44:04.168068400Z     Chinese |        542        4.50       50.88
2021-01-08T21:44:04.168090300Z   All mixed |      2,282       18.96       69.83
2021-01-08T21:44:04.168112600Z       Other |        584        4.85       74.69
2021-01-08T21:44:04.168134500Z     Unknown |      3,047       25.31      100.00
2021-01-08T21:44:04.168156500Z ------------+-----------------------------------
2021-01-08T21:44:04.168178500Z       Total |     12,037      100.00
2021-01-08T21:44:04.168200600Z 
2021-01-08T21:44:04.168222900Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.168245800Z -> eth5 = Black
2021-01-08T21:44:04.168273900Z 6
2021-01-08T21:44:04.168294600Z 
2021-01-08T21:44:04.168316400Z       eth16 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.168338500Z ------------+-----------------------------------
2021-01-08T21:44:04.168358300Z     British |        555        4.65        4.65
2021-01-08T21:44:04.168375000Z       Irish |        525        4.40        9.05
2021-01-08T21:44:04.168396900Z Other White |        518        4.34       13.38
2021-01-08T21:44:04.168418800Z      Indian |        530        4.44       17.82
2021-01-08T21:44:04.168441100Z   Pakistani |        591        4.95       22.77
2021-01-08T21:44:04.168463200Z Bangladeshi |        566        4.74       27.51
2021-01-08T21:44:04.168485200Z Other Asian |        554        4.64       32.15
2021-01-08T21:44:04.168506200Z   Caribbean |        559        4.68       36.83
2021-01-08T21:44:04.168523000Z     African |        577        4.83       41.67
2021-01-08T21:44:04.168544900Z Other Black |        617        5.17       46.83
2021-01-08T21:44:04.168566800Z     Chinese |        568        4.76       51.59
2021-01-08T21:44:04.168588700Z   All mixed |      2,219       18.58       70.18
2021-01-08T21:44:04.168610600Z       Other |        565        4.73       74.91
2021-01-08T21:44:04.168632600Z     Unknown |      2,996       25.09      100.00
2021-01-08T21:44:04.168654500Z ------------+-----------------------------------
2021-01-08T21:44:04.168676400Z       Total |     11,940      100.00
2021-01-08T21:44:04.168698300Z 
2021-01-08T21:44:04.168720100Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.168742200Z -> eth5 = Mixed
2021-01-08T21:44:04.168764100Z 6
2021-01-08T21:44:04.168785800Z 
2021-01-08T21:44:04.168881800Z       eth16 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.168908500Z ------------+-----------------------------------
2021-01-08T21:44:04.168930600Z     British |        558        4.70        4.70
2021-01-08T21:44:04.168952600Z       Irish |        539        4.54        9.25
2021-01-08T21:44:04.168974500Z Other White |        573        4.83       14.08
2021-01-08T21:44:04.168996600Z      Indian |        543        4.58       18.66
2021-01-08T21:44:04.169011800Z   Pakistani |        540        4.55       23.21
2021-01-08T21:44:04.169034100Z Bangladeshi |        553        4.66       27.88
2021-01-08T21:44:04.169056100Z Other Asian |        603        5.08       32.96
2021-01-08T21:44:04.169078000Z   Caribbean |        561        4.73       37.69
2021-01-08T21:44:04.169099800Z     African |        532        4.49       42.18
2021-01-08T21:44:04.169122600Z Other Black |        574        4.84       47.02
2021-01-08T21:44:04.169150200Z     Chinese |        566        4.77       51.79
2021-01-08T21:44:04.169172700Z   All mixed |      2,223       18.74       70.53
2021-01-08T21:44:04.169194800Z       Other |        551        4.65       75.18
2021-01-08T21:44:04.169216700Z     Unknown |      2,944       24.82      100.00
2021-01-08T21:44:04.169238800Z ------------+-----------------------------------
2021-01-08T21:44:04.169260800Z       Total |     11,860      100.00
2021-01-08T21:44:04.169282800Z 
2021-01-08T21:44:04.169304900Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.169327100Z -> eth5 = Other
2021-01-08T21:44:04.169349400Z 6
2021-01-08T21:44:04.169371300Z 
2021-01-08T21:44:04.169393300Z       eth16 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.169415400Z ------------+-----------------------------------
2021-01-08T21:44:04.169437500Z     British |        586        4.97        4.97
2021-01-08T21:44:04.169459600Z       Irish |        555        4.71        9.68
2021-01-08T21:44:04.169481800Z Other White |        541        4.59       14.27
2021-01-08T21:44:04.169504000Z      Indian |        560        4.75       19.03
2021-01-08T21:44:04.169526100Z   Pakistani |        534        4.53       23.56
2021-01-08T21:44:04.169548100Z Bangladeshi |        522        4.43       27.99
2021-01-08T21:44:04.169570200Z Other Asian |        613        5.20       33.19
2021-01-08T21:44:04.169592500Z   Caribbean |        542        4.60       37.79
2021-01-08T21:44:04.169614600Z     African |        552        4.68       42.48
2021-01-08T21:44:04.169636700Z Other Black |        600        5.09       47.57
2021-01-08T21:44:04.169658700Z     Chinese |        557        4.73       52.30
2021-01-08T21:44:04.169680800Z   All mixed |      2,155       18.29       70.58
2021-01-08T21:44:04.169702900Z       Other |        550        4.67       75.25
2021-01-08T21:44:04.169725000Z     Unknown |      2,916       24.75      100.00
2021-01-08T21:44:04.169747200Z ------------+-----------------------------------
2021-01-08T21:44:04.169769300Z       Total |     11,783      100.00
2021-01-08T21:44:04.169791400Z 
2021-01-08T21:44:04.169929500Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.169971600Z -> eth5 = Unknown
2021-01-08T21:44:04.169995600Z 6
2021-01-08T21:44:04.170017700Z 
2021-01-08T21:44:04.170039600Z       eth16 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.170061600Z ------------+-----------------------------------
2021-01-08T21:44:04.170083700Z     British |        933        4.75        4.75
2021-01-08T21:44:04.170109800Z       Irish |        896        4.57        9.32
2021-01-08T21:44:04.170141300Z Other White |        877        4.47       13.79
2021-01-08T21:44:04.170163600Z      Indian |        896        4.57       18.36
2021-01-08T21:44:04.170185700Z   Pakistani |        900        4.59       22.94
2021-01-08T21:44:04.170207700Z Bangladeshi |        955        4.87       27.81
2021-01-08T21:44:04.170229800Z Other Asian |        898        4.58       32.38
2021-01-08T21:44:04.170251800Z   Caribbean |        966        4.92       37.31
2021-01-08T21:44:04.170273500Z     African |        927        4.72       42.03
2021-01-08T21:44:04.170295600Z Other Black |        920        4.69       46.72
2021-01-08T21:44:04.170317400Z     Chinese |        899        4.58       51.30
2021-01-08T21:44:04.170341900Z   All mixed |      3,723       18.97       70.27
2021-01-08T21:44:04.170363900Z       Other |        901        4.59       74.86
2021-01-08T21:44:04.170385900Z     Unknown |      4,933       25.14      100.00
2021-01-08T21:44:04.170407800Z ------------+-----------------------------------
2021-01-08T21:44:04.170429800Z       Total |     19,624      100.00
2021-01-08T21:44:04.170451700Z 
2021-01-08T21:44:04.170473500Z . 
2021-01-08T21:44:04.170495300Z . * STP 
2021-01-08T21:44:04.170517200Z . rename stp stp_old
2021-01-08T21:44:04.170539100Z 
2021-01-08T21:44:04.170561000Z . bysort stp_old: gen stp = 1 if _n==1
2021-01-08T21:44:04.170582000Z (78,855 missing values generated)
2021-01-08T21:44:04.170599400Z 
2021-01-08T21:44:04.170621300Z . replace stp = sum(stp)
2021-01-08T21:44:04.170638500Z (78,864 real changes made)
2021-01-08T21:44:04.170655400Z 
2021-01-08T21:44:04.170677100Z . drop stp_old
2021-01-08T21:44:04.170698900Z 
2021-01-08T21:44:04.170720700Z . 
2021-01-08T21:44:04.170742300Z . 
2021-01-08T21:44:04.170764200Z . 
2021-01-08T21:44:04.170786000Z . 
2021-01-08T21:44:04.170883200Z . /*  Age variables  */ 
2021-01-08T21:44:04.170909700Z . 
2021-01-08T21:44:04.170932000Z . * Create categorised age 
2021-01-08T21:44:04.170954000Z . recode age      0/17.9999=0 ///
2021-01-08T21:44:04.170975900Z >                         18/29.9999 = 1 /// 
2021-01-08T21:44:04.170997900Z >                     30/39.9999 = 2 /// 
2021-01-08T21:44:04.171019800Z >                         40/49.9999 = 3 ///
2021-01-08T21:44:04.171041800Z >                         50/59.9999 = 4 ///
2021-01-08T21:44:04.171063700Z >                         60/69.9999 = 5 ///
2021-01-08T21:44:04.171085700Z >                         70/79.9999 = 6 ///
2021-01-08T21:44:04.171109200Z >                         80/max = 7, gen(agegroup) 
2021-01-08T21:44:04.171138800Z (78865 differences between age and agegroup)
2021-01-08T21:44:04.171161500Z 
2021-01-08T21:44:04.171183400Z . 
2021-01-08T21:44:04.171205300Z . label define agegroup   0 "0-<18" ///
2021-01-08T21:44:04.171227400Z >                                                 1 "18-<30" ///
2021-01-08T21:44:04.171249600Z >                                                 2 "30-<40" ///
2021-01-08T21:44:04.171271700Z >                                                 3 "40-<50" ///
2021-01-08T21:44:04.171293700Z >                                                 4 "50-<60" ///
2021-01-08T21:44:04.171315700Z >                                                 5 "60-<70" ///
2021-01-08T21:44:04.171337900Z >                                                 6 "70-<80" ///
2021-01-08T21:44:04.171433000Z >                                                 7 "80+"
2021-01-08T21:44:04.171495400Z 
2021-01-08T21:44:04.171522100Z .                                                 
2021-01-08T21:44:04.171597000Z . label values agegroup agegroup
2021-01-08T21:44:04.171625400Z 
2021-01-08T21:44:04.171651800Z . 
2021-01-08T21:44:04.171678500Z . 
2021-01-08T21:44:04.171852100Z . 
2021-01-08T21:44:04.171878600Z . 
2021-01-08T21:44:04.171904500Z . 
2021-01-08T21:44:04.171930900Z . 
2021-01-08T21:44:04.171960100Z . **************************** HOUSEHOLD VARS**********************************
2021-01-08T21:44:04.171988000Z > *********
2021-01-08T21:44:04.172016500Z . **care home
2021-01-08T21:44:04.172043300Z . encode care_home_type, gen(carehometype)
2021-01-08T21:44:04.172071600Z 
2021-01-08T21:44:04.172113300Z . drop care_home_type
2021-01-08T21:44:04.172135600Z 
2021-01-08T21:44:04.172157600Z . 
2021-01-08T21:44:04.172179600Z . gen carehome=0
2021-01-08T21:44:04.172201600Z 
2021-01-08T21:44:04.172223500Z . replace carehome=1 if carehometype<4
2021-01-08T21:44:04.172245700Z (11,863 real changes made)
2021-01-08T21:44:04.172267600Z 
2021-01-08T21:44:04.172289400Z . safetab  carehometype carehome, m
2021-01-08T21:44:04.172311400Z 22
2021-01-08T21:44:04.172333300Z 
2021-01-08T21:44:04.172355200Z carehomety |       carehome
2021-01-08T21:44:04.172377100Z         pe |         0          1 |     Total
2021-01-08T21:44:04.172399000Z -----------+----------------------+----------
2021-01-08T21:44:04.172421000Z         PC |         0      3,941 |     3,941 
2021-01-08T21:44:04.172454700Z         PN |         0      3,973 |     3,973 
2021-01-08T21:44:04.172477200Z         PS |         0      3,949 |     3,949 
2021-01-08T21:44:04.172502300Z          U |    67,002          0 |    67,002 
2021-01-08T21:44:04.172524600Z -----------+----------------------+----------
2021-01-08T21:44:04.172546600Z      Total |    67,002     11,863 |    78,865 
2021-01-08T21:44:04.172568700Z 
2021-01-08T21:44:04.172590600Z . 
2021-01-08T21:44:04.172612700Z . *check for missing household size values
2021-01-08T21:44:04.172634800Z . codebook  hh_size, d
2021-01-08T21:44:04.172656700Z 
2021-01-08T21:44:04.172678600Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.172700800Z hh_size                                                             (unlabeled)
2021-01-08T21:44:04.172724000Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.172746600Z 
2021-01-08T21:44:04.172782300Z                   type:  numeric (byte)
2021-01-08T21:44:04.172804500Z 
2021-01-08T21:44:04.172975100Z                  range:  [3,12]                       units:  1
2021-01-08T21:44:04.172996900Z          unique values:  10                       missing .:  0/78,865
2021-01-08T21:44:04.173019200Z 
2021-01-08T21:44:04.173041100Z                   mean:   7.49958
2021-01-08T21:44:04.173094200Z               std. dev:   1.04245
2021-01-08T21:44:04.173121800Z 
2021-01-08T21:44:04.173144100Z            percentiles:        10%       25%       50%       75%       90%
2021-01-08T21:44:04.173166200Z                                  6         7         8         8         9
2021-01-08T21:44:04.173188300Z 
2021-01-08T21:44:04.173210200Z . 
2021-01-08T21:44:04.173232100Z . *gen categories of household size.
2021-01-08T21:44:04.173254000Z . gen hh_total_cat=.
2021-01-08T21:44:04.173275900Z (78,865 missing values generated)
2021-01-08T21:44:04.173297800Z 
2021-01-08T21:44:04.173319600Z . replace hh_total_cat=1 if hh_size >=1 & hh_size<=2
2021-01-08T21:44:04.173342000Z (0 real changes made)
2021-01-08T21:44:04.173363900Z 
2021-01-08T21:44:04.173385600Z . replace hh_total_cat=2 if hh_size >=3 & hh_size<=5
2021-01-08T21:44:04.173407700Z (1,815 real changes made)
2021-01-08T21:44:04.173429500Z 
2021-01-08T21:44:04.173451300Z . replace hh_total_cat=3 if hh_size >=6 & hh_size<=10
2021-01-08T21:44:04.173473600Z (76,935 real changes made)
2021-01-08T21:44:04.173495500Z 
2021-01-08T21:44:04.173517200Z . replace hh_total_cat=4 if hh_size>10 & hh_size!=.
2021-01-08T21:44:04.173545900Z (115 real changes made)
2021-01-08T21:44:04.173568100Z 
2021-01-08T21:44:04.173590000Z . replace hh_total_cat=9 if hh_size==0  //unknown
2021-01-08T21:44:04.173612100Z (0 real changes made)
2021-01-08T21:44:04.173634100Z 
2021-01-08T21:44:04.173655900Z . replace hh_total_cat=5 if carehome==1  
2021-01-08T21:44:04.173677900Z (11,863 real changes made)
2021-01-08T21:44:04.173708600Z 
2021-01-08T21:44:04.173730500Z . 
2021-01-08T21:44:04.173752400Z . 
2021-01-08T21:44:04.173774200Z . *who are people with missing household size
2021-01-08T21:44:04.173880100Z . safecount if hh_total_cat==.
2021-01-08T21:44:04.173905800Z   0
2021-01-08T21:44:04.174167500Z 
2021-01-08T21:44:04.174258500Z . safecount if hh_size==.
2021-01-08T21:44:04.174281000Z   0
2021-01-08T21:44:04.174302900Z 
2021-01-08T21:44:04.174324800Z . bysort  hh_total_cat: summ hh_size
2021-01-08T21:44:04.174346600Z 
2021-01-08T21:44:04.174368300Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.174391000Z -> hh_total_cat = 2
2021-01-08T21:44:04.174413200Z 
2021-01-08T21:44:04.174435000Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.174457000Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.174479000Z      hh_size |      1,540    4.933766    .2513694          3          5
2021-01-08T21:44:04.174501000Z 
2021-01-08T21:44:04.174523000Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.174545000Z -> hh_total_cat = 3
2021-01-08T21:44:04.174566800Z 
2021-01-08T21:44:04.174588500Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.174615500Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.174637800Z      hh_size |     65,370    7.553985    .9683608          6         10
2021-01-08T21:44:04.174659900Z 
2021-01-08T21:44:04.174681800Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.174815300Z -> hh_total_cat = 4
2021-01-08T21:44:04.174842900Z 
2021-01-08T21:44:04.174864900Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.174886800Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.174908700Z      hh_size |         92    11.05435     .227945         11         12
2021-01-08T21:44:04.174930600Z 
2021-01-08T21:44:04.174952500Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.174982100Z -> hh_total_cat = 5
2021-01-08T21:44:04.175004400Z 
2021-01-08T21:44:04.175026100Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.175048100Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.175070100Z      hh_size |     11,863    7.505268    1.039087          4         11
2021-01-08T21:44:04.175092100Z 
2021-01-08T21:44:04.175113800Z 
2021-01-08T21:44:04.175135600Z . 
2021-01-08T21:44:04.175157400Z . label define hh_total_cat 1 "1-2" ///
2021-01-08T21:44:04.175179500Z >                                                 2 "3-5" ///
2021-01-08T21:44:04.175201700Z >                                                 3 "6-10" ///
2021-01-08T21:44:04.175223900Z >                                                 4 "11+" ///
2021-01-08T21:44:04.175246100Z >                                                 5 "carehome" ///
2021-01-08T21:44:04.175268200Z >                                                 9 "Unknown"
2021-01-08T21:44:04.175290300Z 
2021-01-08T21:44:04.175312000Z .                                                                              
2021-01-08T21:44:04.175334100Z >            
2021-01-08T21:44:04.175356000Z . label values hh_total_cat hh_total_cat
2021-01-08T21:44:04.175377900Z 
2021-01-08T21:44:04.175399800Z . 
2021-01-08T21:44:04.175421600Z . safetab hh_total_cat,m
2021-01-08T21:44:04.175443500Z 13
2021-01-08T21:44:04.175465200Z 
2021-01-08T21:44:04.175488700Z hh_total_ca |
2021-01-08T21:44:04.175510800Z           t |      Freq.     Percent        Cum.
2021-01-08T21:44:04.175532700Z ------------+-----------------------------------
2021-01-08T21:44:04.175554600Z         3-5 |      1,540        1.95        1.95
2021-01-08T21:44:04.175576500Z        6-10 |     65,370       82.89       84.84
2021-01-08T21:44:04.175598400Z         11+ |         92        0.12       84.96
2021-01-08T21:44:04.175620200Z    carehome |     11,863       15.04      100.00
2021-01-08T21:44:04.175642000Z ------------+-----------------------------------
2021-01-08T21:44:04.175663900Z       Total |     78,865      100.00
2021-01-08T21:44:04.175685800Z 
2021-01-08T21:44:04.175707600Z . safetab hh_total_cat carehome,m 
2021-01-08T21:44:04.175729400Z 22
2021-01-08T21:44:04.175751200Z 
2021-01-08T21:44:04.175773000Z hh_total_c |       carehome
2021-01-08T21:44:04.175794800Z         at |         0          1 |     Total
2021-01-08T21:44:04.176025000Z -----------+----------------------+----------
2021-01-08T21:44:04.176070400Z        3-5 |     1,540          0 |     1,540 
2021-01-08T21:44:04.176101000Z       6-10 |    65,370          0 |    65,370 
2021-01-08T21:44:04.176123400Z        11+ |        92          0 |        92 
2021-01-08T21:44:04.176145400Z   carehome |         0     11,863 |    11,863 
2021-01-08T21:44:04.176169200Z -----------+----------------------+----------
2021-01-08T21:44:04.176191300Z      Total |    67,002     11,863 |    78,865 
2021-01-08T21:44:04.176213100Z 
2021-01-08T21:44:04.176234900Z . 
2021-01-08T21:44:04.176256800Z . *create second hh_total_cat excluding 11+ households for sensitivity analysis
2021-01-08T21:44:04.176278800Z . gen hh_cat_2=hh_total_cat
2021-01-08T21:44:04.176300700Z 
2021-01-08T21:44:04.176322500Z . replace hh_cat_2=. if hh_total_cat==4
2021-01-08T21:44:04.176344400Z (92 real changes made, 92 to missing)
2021-01-08T21:44:04.176366100Z 
2021-01-08T21:44:04.176387900Z . label values  hh_cat_2 hh_total_cat
2021-01-08T21:44:04.176409800Z 
2021-01-08T21:44:04.176431500Z . 
2021-01-08T21:44:04.176453300Z . 
2021-01-08T21:44:04.176475100Z . *log linear household size
2021-01-08T21:44:04.176496900Z . gen hh_linear=hh_size if hh_size>=1 & hh_size!=.
2021-01-08T21:44:04.176519000Z 
2021-01-08T21:44:04.176540700Z . replace hh_linear=11 if hh_linear>=11 & hh_linear!=.
2021-01-08T21:44:04.176562900Z (5 real changes made)
2021-01-08T21:44:04.176584800Z 
2021-01-08T21:44:04.176606500Z . gen hh_log_linear=log(hh_linear)
2021-01-08T21:44:04.176628300Z 
2021-01-08T21:44:04.176650000Z . sum hh_log_linear hh_linear
2021-01-08T21:44:04.176672000Z 
2021-01-08T21:44:04.176914600Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.176939200Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.176961600Z hh_log_lin~r |     78,865    2.004873    .1426874   1.098612   2.397895
2021-01-08T21:44:04.176983700Z    hh_linear |     78,865    7.499512     1.04221          3         11
2021-01-08T21:44:04.177007600Z 
2021-01-08T21:44:04.177029700Z . 
2021-01-08T21:44:04.177051600Z . 
2021-01-08T21:44:04.177073500Z . /* CONVERT STRINGS TO DATE===================================================
2021-01-08T21:44:04.177095400Z > =*/
2021-01-08T21:44:04.177117200Z . /* Comorb dates dates are given with month only, so adding day 
2021-01-08T21:44:04.177139100Z > 15 to enable  them to be processed as dates                       */
2021-01-08T21:44:04.177161200Z . 
2021-01-08T21:44:04.177183000Z . *cr date for diabetes based on adjudicated type
2021-01-08T21:44:04.177212500Z . gen diabetes=type1_diabetes if diabetes_type=="T1DM"
2021-01-08T21:44:04.177234800Z (78,417 missing values generated)
2021-01-08T21:44:04.177256700Z 
2021-01-08T21:44:04.177278500Z . replace diabetes=type2_diabetes if diabetes_type=="T2DM"
2021-01-08T21:44:04.177300400Z (3,074 real changes made)
2021-01-08T21:44:04.177322400Z 
2021-01-08T21:44:04.177344100Z . replace diabetes=unknown_diabetes if diabetes_type=="UNKNOWN_DM"
2021-01-08T21:44:04.177366200Z (321 real changes made)
2021-01-08T21:44:04.177387900Z 
2021-01-08T21:44:04.177409500Z . 
2021-01-08T21:44:04.177431200Z . drop type1_diabetes type2_diabetes unknown_diabetes
2021-01-08T21:44:04.177453000Z 
2021-01-08T21:44:04.177474600Z . 
2021-01-08T21:44:04.177496300Z . foreach var of varlist  chronic_respiratory_disease ///
2021-01-08T21:44:04.177518200Z >                                                 chronic_cardiac_disease  ///
2021-01-08T21:44:04.177583200Z >                                                 cancer  ///
2021-01-08T21:44:04.177606700Z >                                                 permanent_immunodeficiency  /
2021-01-08T21:44:04.177629100Z > //
2021-01-08T21:44:04.177651100Z >                                                 temporary_immunodeficiency  /
2021-01-08T21:44:04.177673300Z > //
2021-01-08T21:44:04.177695400Z >                                                 chronic_liver_disease  ///
2021-01-08T21:44:04.177717500Z >                                                 other_neuro  ///
2021-01-08T21:44:04.177739700Z >                                                 stroke                  ///
2021-01-08T21:44:04.177763700Z >                                                 dementia ///
2021-01-08T21:44:04.177786000Z >                                                 esrf  ///
2021-01-08T21:44:04.178006800Z >                                                 hypertension  ///
2021-01-08T21:44:04.178035100Z >                                                 ra_sle_psoriasis  ///
2021-01-08T21:44:04.178057900Z >                                                 diabetes ///
2021-01-08T21:44:04.178080300Z >                                                 bmi_date_measured   ///
2021-01-08T21:44:04.178102500Z >                                                 bp_sys_date_measured   ///
2021-01-08T21:44:04.178124800Z >                                                 bp_dias_date_measured   ///
2021-01-08T21:44:04.178147000Z >                                                 creatinine_date  ///
2021-01-08T21:44:04.178169200Z >                                                 hba1c_mmol_per_mol_date  ///
2021-01-08T21:44:04.178191400Z >                                                 hba1c_percentage_date ///
2021-01-08T21:44:04.178222200Z >                                                 smoking_status_date ///
2021-01-08T21:44:04.178245200Z >                                                 insulin ///
2021-01-08T21:44:04.178268300Z >                                                 statin ///
2021-01-08T21:44:04.178291400Z >                                                 ace_inhibitors ///
2021-01-08T21:44:04.178314300Z >                                                 arbs ///
2021-01-08T21:44:04.178337800Z >                                                 alpha_blockers ///
2021-01-08T21:44:04.178360500Z >                                                 betablockers ///
2021-01-08T21:44:04.178382600Z >                                                 calcium_channel_blockers ///
2021-01-08T21:44:04.178406300Z >                                                 spironolactone  ///
2021-01-08T21:44:04.178749000Z >                                                 thiazide_diuretics ///       
2021-01-08T21:44:04.179274500Z >                                    
2021-01-08T21:44:04.179304100Z >                                                 {
2021-01-08T21:44:04.179331500Z   2.                                                         
2021-01-08T21:44:04.185929600Z .                 capture confirm string variable `var'
2021-01-08T21:44:04.185952800Z   3.                 if _rc!=0 {
2021-01-08T21:44:04.186061400Z   4.                         cap assert `var'==.
2021-01-08T21:44:04.186084600Z   5.                         rename `var' `var'_date
2021-01-08T21:44:04.186106800Z   6.                 }
2021-01-08T21:44:04.186130300Z   7.         
2021-01-08T21:44:04.186275200Z .                 else {
2021-01-08T21:44:04.186301300Z   8.                                 replace `var' = `var' + "-15"
2021-01-08T21:44:04.186428900Z   9.                                 rename `var' `var'_dstr
2021-01-08T21:44:04.186459000Z  10.                                 replace `var'_dstr = " " if `var'_dstr == 
2021-01-08T21:44:04.186547300Z > "-15"
2021-01-08T21:44:04.186570500Z  11.                                 gen `var'_date = date(`var'_dstr, "YMD") 
2021-01-08T21:44:04.186592900Z  12.                                 order `var'_date, after(`var'_dstr)
2021-01-08T21:44:04.186614900Z  13.                                 drop `var'_dstr
2021-01-08T21:44:04.186740200Z  14.                 }
2021-01-08T21:44:04.186763400Z  15.         
2021-01-08T21:44:04.186785300Z .         format `var'_date %td
2021-01-08T21:44:04.186808600Z  16. }
2021-01-08T21:44:04.186908400Z variable chronic_respiratory_disease was str7 now str10
2021-01-08T21:44:04.186930300Z (78,865 real changes made)
2021-01-08T21:44:04.186952100Z (63,190 real changes made)
2021-01-08T21:44:04.187073900Z (63,190 missing values generated)
2021-01-08T21:44:04.187096400Z variable chronic_cardiac_disease was str7 now str10
2021-01-08T21:44:04.187118300Z (78,865 real changes made)
2021-01-08T21:44:04.187225700Z (63,010 real changes made)
2021-01-08T21:44:04.187250200Z (63,010 missing values generated)
2021-01-08T21:44:04.187274500Z variable cancer was str7 now str10
2021-01-08T21:44:04.187386700Z (78,865 real changes made)
2021-01-08T21:44:04.187414400Z (63,202 real changes made)
2021-01-08T21:44:04.187440400Z (63,202 missing values generated)
2021-01-08T21:44:04.187557300Z variable permanent_immunodeficiency was str7 now str10
2021-01-08T21:44:04.187584600Z (78,865 real changes made)
2021-01-08T21:44:04.187610700Z (63,061 real changes made)
2021-01-08T21:44:04.187959700Z (63,061 missing values generated)
2021-01-08T21:44:04.187982400Z variable temporary_immunodeficiency was str7 now str10
2021-01-08T21:44:04.188005200Z (78,865 real changes made)
2021-01-08T21:44:04.188126000Z (63,072 real changes made)
2021-01-08T21:44:04.188151300Z (63,072 missing values generated)
2021-01-08T21:44:04.188180300Z variable chronic_liver_disease was str7 now str10
2021-01-08T21:44:04.188321500Z (78,865 real changes made)
2021-01-08T21:44:04.188348400Z (63,155 real changes made)
2021-01-08T21:44:04.188374800Z (63,155 missing values generated)
2021-01-08T21:44:04.188547800Z variable other_neuro was str7 now str10
2021-01-08T21:44:04.188576700Z (78,865 real changes made)
2021-01-08T21:44:04.188748700Z (63,073 real changes made)
2021-01-08T21:44:04.188774400Z (63,073 missing values generated)
2021-01-08T21:44:04.188800400Z variable stroke was str7 now str10
2021-01-08T21:44:04.188929900Z (78,865 real changes made)
2021-01-08T21:44:04.188960700Z (63,076 real changes made)
2021-01-08T21:44:04.189087000Z (63,076 missing values generated)
2021-01-08T21:44:04.189112800Z variable dementia was str7 now str10
2021-01-08T21:44:04.189233800Z (78,865 real changes made)
2021-01-08T21:44:04.189260400Z (63,032 real changes made)
2021-01-08T21:44:04.189290100Z (63,032 missing values generated)
2021-01-08T21:44:04.189416400Z variable esrf was str7 now str10
2021-01-08T21:44:04.189444100Z (78,865 real changes made)
2021-01-08T21:44:04.189474200Z (63,044 real changes made)
2021-01-08T21:44:04.189572600Z (63,044 missing values generated)
2021-01-08T21:44:04.189599400Z variable hypertension was str7 now str10
2021-01-08T21:44:04.189626100Z (78,865 real changes made)
2021-01-08T21:44:04.189770400Z (63,069 real changes made)
2021-01-08T21:44:04.189796400Z (63,069 missing values generated)
2021-01-08T21:44:04.189931400Z variable ra_sle_psoriasis was str7 now str10
2021-01-08T21:44:04.189957700Z (78,865 real changes made)
2021-01-08T21:44:04.189983100Z (63,122 real changes made)
2021-01-08T21:44:04.190096200Z (63,122 missing values generated)
2021-01-08T21:44:04.190132200Z variable diabetes was str7 now str10
2021-01-08T21:44:04.190289600Z (78,865 real changes made)
2021-01-08T21:44:04.190322300Z (75,022 real changes made)
2021-01-08T21:44:04.190430900Z (75,022 missing values generated)
2021-01-08T21:44:04.190456100Z variable bmi_date_measured was str7 now str10
2021-01-08T21:44:04.190478100Z (78,865 real changes made)
2021-01-08T21:44:04.190634100Z (3,932 real changes made)
2021-01-08T21:44:04.190828800Z (3,932 missing values generated)
2021-01-08T21:44:04.190863100Z variable bp_sys_date_measured was str7 now str10
2021-01-08T21:44:04.191031900Z (78,865 real changes made)
2021-01-08T21:44:04.191151900Z (3,946 real changes made)
2021-01-08T21:44:04.191178000Z (3,946 missing values generated)
2021-01-08T21:44:04.191203300Z variable bp_dias_date_measured was str7 now str10
2021-01-08T21:44:04.191320700Z (78,865 real changes made)
2021-01-08T21:44:04.191346600Z (3,958 real changes made)
2021-01-08T21:44:04.191372700Z (3,958 missing values generated)
2021-01-08T21:44:04.191494400Z variable creatinine_date was str7 now str10
2021-01-08T21:44:04.191520100Z (78,865 real changes made)
2021-01-08T21:44:04.191545700Z (3,916 real changes made)
2021-01-08T21:44:04.191730500Z (3,916 missing values generated)
2021-01-08T21:44:04.191756300Z variable hba1c_mmol_per_mol_date was str7 now str10
2021-01-08T21:44:04.191782100Z (78,865 real changes made)
2021-01-08T21:44:04.191897900Z (3,943 real changes made)
2021-01-08T21:44:04.191923400Z (3,943 missing values generated)
2021-01-08T21:44:04.191949500Z variable hba1c_percentage_date was str7 now str10
2021-01-08T21:44:04.192106300Z (78,865 real changes made)
2021-01-08T21:44:04.192129200Z (3,962 real changes made)
2021-01-08T21:44:04.192323500Z (3,962 missing values generated)
2021-01-08T21:44:04.192483800Z variable smoking_status_date was str7 now str10
2021-01-08T21:44:04.192506500Z (78,865 real changes made)
2021-01-08T21:44:04.192536400Z (63,301 real changes made)
2021-01-08T21:44:04.192558700Z (63,301 missing values generated)
2021-01-08T21:44:04.192726700Z variable insulin was str7 now str10
2021-01-08T21:44:04.192749200Z (78,865 real changes made)
2021-01-08T21:44:04.192907500Z (63,100 real changes made)
2021-01-08T21:44:04.192930500Z (63,100 missing values generated)
2021-01-08T21:44:04.192966800Z variable statin was str7 now str10
2021-01-08T21:44:04.193092100Z (78,865 real changes made)
2021-01-08T21:44:04.193114300Z (63,102 real changes made)
2021-01-08T21:44:04.193143800Z (63,102 missing values generated)
2021-01-08T21:44:04.193167100Z 
2021-01-08T21:44:04.193265000Z . 
2021-01-08T21:44:04.193287000Z . * Note - outcome dates are handled separtely below 
2021-01-08T21:44:04.193309000Z . 
2021-01-08T21:44:04.193406900Z . * Some names too long for loops below, shorten
2021-01-08T21:44:04.193430000Z . rename permanent_immunodeficiency_date  perm_immunodef_date
2021-01-08T21:44:04.193452300Z 
2021-01-08T21:44:04.193477000Z . rename temporary_immunodeficiency_date  temp_immunodef_date
2021-01-08T21:44:04.193760300Z 
2021-01-08T21:44:04.193784200Z . rename bmi_date_measured_date                   bmi_measured_date
2021-01-08T21:44:04.196129600Z 
2021-01-08T21:44:04.196154100Z . 
2021-01-08T21:44:04.196176400Z . /* CREATE BINARY VARIABLES===================================================
2021-01-08T21:44:04.196763700Z > =*/
2021-01-08T21:44:04.196885200Z . *  Make indicator variables for all conditions where relevant 
2021-01-08T21:44:04.196907500Z . 
2021-01-08T21:44:04.197005700Z . foreach var of varlist  chronic_respiratory_disease ///
2021-01-08T21:44:04.197027900Z >                                                 chronic_cardiac_disease  ///
2021-01-08T21:44:04.197050000Z >                                                 cancer  ///
2021-01-08T21:44:04.197072800Z >                                                 perm_immunodef  ///
2021-01-08T21:44:04.197175000Z >                                                 temp_immunodef  ///
2021-01-08T21:44:04.197197200Z >                                                 chronic_liver_disease  ///
2021-01-08T21:44:04.197221500Z >                                                 other_neuro  ///
2021-01-08T21:44:04.197319000Z >                                                 stroke                  ///
2021-01-08T21:44:04.197341900Z >                                                 dementia ///
2021-01-08T21:44:04.197364000Z >                                                 esrf  ///
2021-01-08T21:44:04.197386000Z >                                                 hypertension  ///
2021-01-08T21:44:04.197567000Z >                                                 ra_sle_psoriasis  ///
2021-01-08T21:44:04.197590100Z >                                                 bmi_measured_date   ///
2021-01-08T21:44:04.197612400Z >                                                 bp_sys_date_measured   ///
2021-01-08T21:44:04.197781400Z >                                                 bp_dias_date_measured   ///
2021-01-08T21:44:04.197818200Z >                                                 creatinine_date  ///
2021-01-08T21:44:04.197866300Z >                                                 hba1c_mmol_per_mol_date  ///
2021-01-08T21:44:04.197934300Z >                                                 hba1c_percentage_date ///
2021-01-08T21:44:04.197956600Z >                                                 smoking_status_date ///
2021-01-08T21:44:04.197978600Z >                                                 insulin ///
2021-01-08T21:44:04.198075500Z >                                                 statin ///
2021-01-08T21:44:04.198098300Z >                                                 ace_inhibitors ///
2021-01-08T21:44:04.198120400Z >                                                 arbs ///
2021-01-08T21:44:04.198142500Z >                                                 alpha_blockers ///
2021-01-08T21:44:04.198237400Z >                                                 betablockers ///
2021-01-08T21:44:04.198259800Z >                                                 calcium_channel_blockers ///
2021-01-08T21:44:04.198281900Z >                                                 spironolactone  ///
2021-01-08T21:44:04.198303900Z >                                                 thiazide_diuretics ///       
2021-01-08T21:44:04.198411500Z >                                    
2021-01-08T21:44:04.198433900Z >                                                 {
2021-01-08T21:44:04.198455900Z   2.                                                 
2021-01-08T21:44:04.198541800Z .         /* date ranges are applied in python, so presence of date indicates p
2021-01-08T21:44:04.198564400Z > resence of 
2021-01-08T21:44:04.198586500Z >           disease in the correct time frame */ 
2021-01-08T21:44:04.198608600Z .         local newvar =  substr("`var'", 1, length("`var'") - 5)
2021-01-08T21:44:04.198694800Z   3.         gen `newvar' = (`var'!=. )
2021-01-08T21:44:04.198825300Z   4.         order `newvar', after(`var')
2021-01-08T21:44:04.198848900Z   5.         safetab `newvar', m
2021-01-08T21:44:04.198871200Z   6.         
2021-01-08T21:44:04.198977600Z . }
2021-01-08T21:44:04.198996200Z 28
2021-01-08T21:44:04.199018500Z 
2021-01-08T21:44:04.199116700Z chronic_res |
2021-01-08T21:44:04.199139100Z piratory_di |
2021-01-08T21:44:04.199161000Z       sease |      Freq.     Percent        Cum.
2021-01-08T21:44:04.199183000Z ------------+-----------------------------------
2021-01-08T21:44:04.199279200Z           0 |     63,190       80.12       80.12
2021-01-08T21:44:04.199301600Z           1 |     15,675       19.88      100.00
2021-01-08T21:44:04.199323600Z ------------+-----------------------------------
2021-01-08T21:44:04.199345300Z       Total |     78,865      100.00
2021-01-08T21:44:04.199447700Z 24
2021-01-08T21:44:04.199470200Z 
2021-01-08T21:44:04.199501400Z chronic_car |
2021-01-08T21:44:04.199584800Z diac_diseas |
2021-01-08T21:44:04.199606900Z           e |      Freq.     Percent        Cum.
2021-01-08T21:44:04.199742700Z ------------+-----------------------------------
2021-01-08T21:44:04.199765600Z           0 |     63,010       79.90       79.90
2021-01-08T21:44:04.199787900Z           1 |     15,855       20.10      100.00
2021-01-08T21:44:04.199812300Z ------------+-----------------------------------
2021-01-08T21:44:04.199839000Z       Total |     78,865      100.00
2021-01-08T21:44:04.199934600Z 7
2021-01-08T21:44:04.199956600Z 
2021-01-08T21:44:04.199978100Z      cancer |      Freq.     Percent        Cum.
2021-01-08T21:44:04.200001200Z ------------+-----------------------------------
2021-01-08T21:44:04.200096900Z           0 |     63,202       80.14       80.14
2021-01-08T21:44:04.200118800Z           1 |     15,663       19.86      100.00
2021-01-08T21:44:04.200140600Z ------------+-----------------------------------
2021-01-08T21:44:04.200163600Z       Total |     78,865      100.00
2021-01-08T21:44:04.200262500Z 15
2021-01-08T21:44:04.200284600Z 
2021-01-08T21:44:04.200306300Z perm_immuno |
2021-01-08T21:44:04.200412400Z         def |      Freq.     Percent        Cum.
2021-01-08T21:44:04.200434400Z ------------+-----------------------------------
2021-01-08T21:44:04.200456400Z           0 |     63,061       79.96       79.96
2021-01-08T21:44:04.200544600Z           1 |     15,804       20.04      100.00
2021-01-08T21:44:04.200566900Z ------------+-----------------------------------
2021-01-08T21:44:04.200588900Z       Total |     78,865      100.00
2021-01-08T21:44:04.200610700Z 15
2021-01-08T21:44:04.200758500Z 
2021-01-08T21:44:04.200785900Z temp_immuno |
2021-01-08T21:44:04.200808500Z         def |      Freq.     Percent        Cum.
2021-01-08T21:44:04.200995100Z ------------+-----------------------------------
2021-01-08T21:44:04.201020800Z           0 |     63,072       79.97       79.97
2021-01-08T21:44:04.201043200Z           1 |     15,793       20.03      100.00
2021-01-08T21:44:04.201066600Z ------------+-----------------------------------
2021-01-08T21:44:04.201163300Z       Total |     78,865      100.00
2021-01-08T21:44:04.201185600Z 22
2021-01-08T21:44:04.201207400Z 
2021-01-08T21:44:04.201230200Z chronic_liv |
2021-01-08T21:44:04.201325500Z  er_disease |      Freq.     Percent        Cum.
2021-01-08T21:44:04.201347500Z ------------+-----------------------------------
2021-01-08T21:44:04.201377200Z           0 |     63,155       80.08       80.08
2021-01-08T21:44:04.201473700Z           1 |     15,710       19.92      100.00
2021-01-08T21:44:04.201496000Z ------------+-----------------------------------
2021-01-08T21:44:04.201518000Z       Total |     78,865      100.00
2021-01-08T21:44:04.201539900Z 12
2021-01-08T21:44:04.201771400Z 
2021-01-08T21:44:04.201794200Z other_neuro |      Freq.     Percent        Cum.
2021-01-08T21:44:04.201818000Z ------------+-----------------------------------
2021-01-08T21:44:04.201919700Z           0 |     63,073       79.98       79.98
2021-01-08T21:44:04.201941900Z           1 |     15,792       20.02      100.00
2021-01-08T21:44:04.201965600Z ------------+-----------------------------------
2021-01-08T21:44:04.202064700Z       Total |     78,865      100.00
2021-01-08T21:44:04.202087100Z 7
2021-01-08T21:44:04.202108900Z 
2021-01-08T21:44:04.202214100Z      stroke |      Freq.     Percent        Cum.
2021-01-08T21:44:04.202236200Z ------------+-----------------------------------
2021-01-08T21:44:04.202258200Z           0 |     63,076       79.98       79.98
2021-01-08T21:44:04.202363500Z           1 |     15,789       20.02      100.00
2021-01-08T21:44:04.202385700Z ------------+-----------------------------------
2021-01-08T21:44:04.202407800Z       Total |     78,865      100.00
2021-01-08T21:44:04.202509700Z 9
2021-01-08T21:44:04.202531800Z 
2021-01-08T21:44:04.202553600Z    dementia |      Freq.     Percent        Cum.
2021-01-08T21:44:04.202713600Z ------------+-----------------------------------
2021-01-08T21:44:04.202739100Z           0 |     63,032       79.92       79.92
2021-01-08T21:44:04.202761100Z           1 |     15,833       20.08      100.00
2021-01-08T21:44:04.202784200Z ------------+-----------------------------------
2021-01-08T21:44:04.202884800Z       Total |     78,865      100.00
2021-01-08T21:44:04.202907000Z 5
2021-01-08T21:44:04.202928800Z 
2021-01-08T21:44:04.203034400Z        esrf |      Freq.     Percent        Cum.
2021-01-08T21:44:04.203056700Z ------------+-----------------------------------
2021-01-08T21:44:04.203078700Z           0 |     63,044       79.94       79.94
2021-01-08T21:44:04.203178600Z           1 |     15,821       20.06      100.00
2021-01-08T21:44:04.203201500Z ------------+-----------------------------------
2021-01-08T21:44:04.203223500Z       Total |     78,865      100.00
2021-01-08T21:44:04.203245600Z 13
2021-01-08T21:44:04.203391100Z 
2021-01-08T21:44:04.203554900Z hypertensio |
2021-01-08T21:44:04.203611300Z           n |      Freq.     Percent        Cum.
2021-01-08T21:44:04.203783400Z ------------+-----------------------------------
2021-01-08T21:44:04.203811800Z           0 |     63,069       79.97       79.97
2021-01-08T21:44:04.203916000Z           1 |     15,796       20.03      100.00
2021-01-08T21:44:04.203938800Z ------------+-----------------------------------
2021-01-08T21:44:04.203960900Z       Total |     78,865      100.00
2021-01-08T21:44:04.203984000Z 17
2021-01-08T21:44:04.204084400Z 
2021-01-08T21:44:04.204106200Z ra_sle_psor |
2021-01-08T21:44:04.204128100Z       iasis |      Freq.     Percent        Cum.
2021-01-08T21:44:04.204234300Z ------------+-----------------------------------
2021-01-08T21:44:04.204256600Z           0 |     63,122       80.04       80.04
2021-01-08T21:44:04.204278500Z           1 |     15,743       19.96      100.00
2021-01-08T21:44:04.204379300Z ------------+-----------------------------------
2021-01-08T21:44:04.204402200Z       Total |     78,865      100.00
2021-01-08T21:44:04.204424400Z 13
2021-01-08T21:44:04.204446200Z 
2021-01-08T21:44:04.204468000Z bmi_measure |
2021-01-08T21:44:04.204551100Z           d |      Freq.     Percent        Cum.
2021-01-08T21:44:04.204573400Z ------------+-----------------------------------
2021-01-08T21:44:04.204595200Z           0 |      3,932        4.99        4.99
2021-01-08T21:44:04.204617200Z           1 |     74,933       95.01      100.00
2021-01-08T21:44:04.204910300Z ------------+-----------------------------------
2021-01-08T21:44:04.204933400Z       Total |     78,865      100.00
2021-01-08T21:44:04.204957400Z 21
2021-01-08T21:44:04.204986800Z 
2021-01-08T21:44:04.205009600Z bp_sys_date |
2021-01-08T21:44:04.205031700Z   _measured |      Freq.     Percent        Cum.
2021-01-08T21:44:04.205053700Z ------------+-----------------------------------
2021-01-08T21:44:04.205075500Z           0 |      3,946        5.00        5.00
2021-01-08T21:44:04.205098800Z           1 |     74,919       95.00      100.00
2021-01-08T21:44:04.205126500Z ------------+-----------------------------------
2021-01-08T21:44:04.205223300Z       Total |     78,865      100.00
2021-01-08T21:44:04.205245500Z 22
2021-01-08T21:44:04.205267400Z 
2021-01-08T21:44:04.205289000Z bp_dias_dat |
2021-01-08T21:44:04.205310800Z  e_measured |      Freq.     Percent        Cum.
2021-01-08T21:44:04.205332700Z ------------+-----------------------------------
2021-01-08T21:44:04.205354700Z           0 |      3,958        5.02        5.02
2021-01-08T21:44:04.205376700Z           1 |     74,907       94.98      100.00
2021-01-08T21:44:04.205406900Z ------------+-----------------------------------
2021-01-08T21:44:04.205429300Z       Total |     78,865      100.00
2021-01-08T21:44:04.205451100Z 16
2021-01-08T21:44:04.205472800Z 
2021-01-08T21:44:04.205494400Z creatinine_ |
2021-01-08T21:44:04.205516000Z        date |      Freq.     Percent        Cum.
2021-01-08T21:44:04.205537900Z ------------+-----------------------------------
2021-01-08T21:44:04.205559700Z           0 |      3,916        4.97        4.97
2021-01-08T21:44:04.205581600Z           1 |     74,949       95.03      100.00
2021-01-08T21:44:04.205603400Z ------------+-----------------------------------
2021-01-08T21:44:04.205625200Z       Total |     78,865      100.00
2021-01-08T21:44:04.205647800Z 24
2021-01-08T21:44:04.205886500Z 
2021-01-08T21:44:04.205909100Z hba1c_mmol_ |
2021-01-08T21:44:04.205930900Z per_mol_dat |
2021-01-08T21:44:04.205952700Z           e |      Freq.     Percent        Cum.
2021-01-08T21:44:04.205974600Z ------------+-----------------------------------
2021-01-08T21:44:04.205996300Z           0 |      3,943        5.00        5.00
2021-01-08T21:44:04.206018200Z           1 |     74,922       95.00      100.00
2021-01-08T21:44:04.206040100Z ------------+-----------------------------------
2021-01-08T21:44:04.206062000Z       Total |     78,865      100.00
2021-01-08T21:44:04.206083900Z 22
2021-01-08T21:44:04.206105800Z 
2021-01-08T21:44:04.206127600Z hba1c_perce |
2021-01-08T21:44:04.206149500Z  ntage_date |      Freq.     Percent        Cum.
2021-01-08T21:44:04.206171400Z ------------+-----------------------------------
2021-01-08T21:44:04.206193300Z           0 |      3,962        5.02        5.02
2021-01-08T21:44:04.206215200Z           1 |     74,903       94.98      100.00
2021-01-08T21:44:04.206237000Z ------------+-----------------------------------
2021-01-08T21:44:04.206258800Z       Total |     78,865      100.00
2021-01-08T21:44:04.206287300Z 20
2021-01-08T21:44:04.206309200Z 
2021-01-08T21:44:04.206330900Z smoking_sta |
2021-01-08T21:44:04.206352800Z    tus_date |      Freq.     Percent        Cum.
2021-01-08T21:44:04.206374600Z ------------+-----------------------------------
2021-01-08T21:44:04.206425300Z           0 |     63,301       80.27       80.27
2021-01-08T21:44:04.206447100Z           1 |     15,564       19.73      100.00
2021-01-08T21:44:04.206469500Z ------------+-----------------------------------
2021-01-08T21:44:04.206491400Z       Total |     78,865      100.00
2021-01-08T21:44:04.206513300Z 8
2021-01-08T21:44:04.206535100Z 
2021-01-08T21:44:04.206556900Z     insulin |      Freq.     Percent        Cum.
2021-01-08T21:44:04.206586800Z ------------+-----------------------------------
2021-01-08T21:44:04.206609200Z           0 |     63,100       80.01       80.01
2021-01-08T21:44:04.206631100Z           1 |     15,765       19.99      100.00
2021-01-08T21:44:04.206652900Z ------------+-----------------------------------
2021-01-08T21:44:04.206674800Z       Total |     78,865      100.00
2021-01-08T21:44:04.206788600Z 7
2021-01-08T21:44:04.206859500Z 
2021-01-08T21:44:04.206881500Z      statin |      Freq.     Percent        Cum.
2021-01-08T21:44:04.206903600Z ------------+-----------------------------------
2021-01-08T21:44:04.206997400Z           0 |     63,102       80.01       80.01
2021-01-08T21:44:04.207019600Z           1 |     15,763       19.99      100.00
2021-01-08T21:44:04.207043600Z ------------+-----------------------------------
2021-01-08T21:44:04.207065700Z       Total |     78,865      100.00
2021-01-08T21:44:04.207087700Z 15
2021-01-08T21:44:04.207109600Z 
2021-01-08T21:44:04.207131400Z ace_inhibit |
2021-01-08T21:44:04.207153200Z         ors |      Freq.     Percent        Cum.
2021-01-08T21:44:04.207175000Z ------------+-----------------------------------
2021-01-08T21:44:04.207196700Z           0 |     55,263       70.07       70.07
2021-01-08T21:44:04.207218500Z           1 |     23,602       29.93      100.00
2021-01-08T21:44:04.207240300Z ------------+-----------------------------------
2021-01-08T21:44:04.207262200Z       Total |     78,865      100.00
2021-01-08T21:44:04.207284000Z 5
2021-01-08T21:44:04.207305800Z 
2021-01-08T21:44:04.207327500Z        arbs |      Freq.     Percent        Cum.
2021-01-08T21:44:04.207349400Z ------------+-----------------------------------
2021-01-08T21:44:04.207371200Z           0 |     55,251       70.06       70.06
2021-01-08T21:44:04.207393200Z           1 |     23,614       29.94      100.00
2021-01-08T21:44:04.207415000Z ------------+-----------------------------------
2021-01-08T21:44:04.207437000Z       Total |     78,865      100.00
2021-01-08T21:44:04.207458800Z 15
2021-01-08T21:44:04.207480600Z 
2021-01-08T21:44:04.207502400Z alpha_block |
2021-01-08T21:44:04.207524200Z         ers |      Freq.     Percent        Cum.
2021-01-08T21:44:04.207546100Z ------------+-----------------------------------
2021-01-08T21:44:04.207568100Z           0 |     55,171       69.96       69.96
2021-01-08T21:44:04.207590100Z           1 |     23,694       30.04      100.00
2021-01-08T21:44:04.207612100Z ------------+-----------------------------------
2021-01-08T21:44:04.207634000Z       Total |     78,865      100.00
2021-01-08T21:44:04.207661500Z 13
2021-01-08T21:44:04.207683500Z 
2021-01-08T21:44:04.207705300Z betablocker |
2021-01-08T21:44:04.207738900Z           s |      Freq.     Percent        Cum.
2021-01-08T21:44:04.207761000Z ------------+-----------------------------------
2021-01-08T21:44:04.207843700Z           0 |     55,127       69.90       69.90
2021-01-08T21:44:04.207860500Z           1 |     23,738       30.10      100.00
2021-01-08T21:44:04.207881500Z ------------+-----------------------------------
2021-01-08T21:44:04.207903900Z       Total |     78,865      100.00
2021-01-08T21:44:04.207925700Z 25
2021-01-08T21:44:04.207947400Z 
2021-01-08T21:44:04.207969100Z calcium_cha |
2021-01-08T21:44:04.207990900Z nnel_blocke |
2021-01-08T21:44:04.208012700Z          rs |      Freq.     Percent        Cum.
2021-01-08T21:44:04.208034500Z ------------+-----------------------------------
2021-01-08T21:44:04.208056200Z           0 |     55,115       69.89       69.89
2021-01-08T21:44:04.208079600Z           1 |     23,750       30.11      100.00
2021-01-08T21:44:04.208101700Z ------------+-----------------------------------
2021-01-08T21:44:04.208123700Z       Total |     78,865      100.00
2021-01-08T21:44:04.208145400Z 15
2021-01-08T21:44:04.208167000Z 
2021-01-08T21:44:04.208188700Z spironolact |
2021-01-08T21:44:04.208210400Z         one |      Freq.     Percent        Cum.
2021-01-08T21:44:04.208232300Z ------------+-----------------------------------
2021-01-08T21:44:04.208254000Z           0 |     55,311       70.13       70.13
2021-01-08T21:44:04.208275700Z           1 |     23,554       29.87      100.00
2021-01-08T21:44:04.208297300Z ------------+-----------------------------------
2021-01-08T21:44:04.208319200Z       Total |     78,865      100.00
2021-01-08T21:44:04.208341000Z 19
2021-01-08T21:44:04.208362600Z 
2021-01-08T21:44:04.208384200Z thiazide_di |
2021-01-08T21:44:04.208406000Z     uretics |      Freq.     Percent        Cum.
2021-01-08T21:44:04.208427800Z ------------+-----------------------------------
2021-01-08T21:44:04.208449400Z           0 |     55,212       70.01       70.01
2021-01-08T21:44:04.208472100Z           1 |     23,653       29.99      100.00
2021-01-08T21:44:04.208494200Z ------------+-----------------------------------
2021-01-08T21:44:04.208516000Z       Total |     78,865      100.00
2021-01-08T21:44:04.208537900Z 
2021-01-08T21:44:04.208559600Z . 
2021-01-08T21:44:04.208581200Z . 
2021-01-08T21:44:04.208602900Z . /*  Body Mass Index  */
2021-01-08T21:44:04.208630200Z . * NB: watch for missingness
2021-01-08T21:44:04.208652200Z . 
2021-01-08T21:44:04.208674100Z . * Recode strange values 
2021-01-08T21:44:04.208695800Z . replace bmi = . if bmi == 0 
2021-01-08T21:44:04.208717600Z (0 real changes made)
2021-01-08T21:44:04.208739400Z 
2021-01-08T21:44:04.208761000Z . replace bmi = . if !inrange(bmi, 15, 50)
2021-01-08T21:44:04.208782800Z (6,686 real changes made, 6,686 to missing)
2021-01-08T21:44:04.208904800Z 
2021-01-08T21:44:04.208922100Z . 
2021-01-08T21:44:04.208944400Z . * Restrict to within 10 years of index and aged > 16 
2021-01-08T21:44:04.208966700Z . gen bmi_time = (indexdate - bmi_measured_date)/365.25
2021-01-08T21:44:04.208988600Z (3,932 missing values generated)
2021-01-08T21:44:04.209010400Z 
2021-01-08T21:44:04.209032100Z . gen bmi_age = age - bmi_time
2021-01-08T21:44:04.209053800Z (3,932 missing values generated)
2021-01-08T21:44:04.209075600Z 
2021-01-08T21:44:04.209097300Z . 
2021-01-08T21:44:04.209119000Z . replace bmi = . if bmi_age < 16 
2021-01-08T21:44:04.209141000Z (3,640 real changes made, 3,640 to missing)
2021-01-08T21:44:04.209163000Z 
2021-01-08T21:44:04.209184600Z . replace bmi = . if bmi_time > 10 & bmi_time != . 
2021-01-08T21:44:04.209206500Z (0 real changes made)
2021-01-08T21:44:04.209228300Z 
2021-01-08T21:44:04.209249900Z . 
2021-01-08T21:44:04.209271500Z . * Set to missing if no date, and vice versa 
2021-01-08T21:44:04.209293300Z . replace bmi = . if bmi_measured_date == . 
2021-01-08T21:44:04.209315100Z (0 real changes made)
2021-01-08T21:44:04.209336900Z 
2021-01-08T21:44:04.209358600Z . replace bmi_measured_date = . if bmi == . 
2021-01-08T21:44:04.209380400Z (10,326 real changes made, 10,326 to missing)
2021-01-08T21:44:04.209402200Z 
2021-01-08T21:44:04.209423800Z . replace bmi_measured = . if bmi == . 
2021-01-08T21:44:04.209445600Z (14,258 real changes made, 14,258 to missing)
2021-01-08T21:44:04.209467400Z 
2021-01-08T21:44:04.209489000Z . 
2021-01-08T21:44:04.209510600Z . * BMI (NB: watch for missingness)
2021-01-08T21:44:04.209532300Z . gen     bmicat = .
2021-01-08T21:44:04.209554000Z (78,865 missing values generated)
2021-01-08T21:44:04.209575800Z 
2021-01-08T21:44:04.209597500Z . recode  bmicat . = 1 if bmi<18.5
2021-01-08T21:44:04.209619500Z (bmicat: 1910 changes made)
2021-01-08T21:44:04.209641300Z 
2021-01-08T21:44:04.209663000Z . recode  bmicat . = 2 if bmi<25
2021-01-08T21:44:04.209685000Z (bmicat: 7619 changes made)
2021-01-08T21:44:04.209713300Z 
2021-01-08T21:44:04.209735300Z . recode  bmicat . = 3 if bmi<30
2021-01-08T21:44:04.209757300Z (bmicat: 10570 changes made)
2021-01-08T21:44:04.209779200Z 
2021-01-08T21:44:04.209877800Z . recode  bmicat . = 4 if bmi<35
2021-01-08T21:44:04.209900000Z (bmicat: 13577 changes made)
2021-01-08T21:44:04.209921900Z 
2021-01-08T21:44:04.209943500Z . recode  bmicat . = 5 if bmi<40
2021-01-08T21:44:04.209965500Z (bmicat: 13757 changes made)
2021-01-08T21:44:04.209987200Z 
2021-01-08T21:44:04.210008900Z . recode  bmicat . = 6 if bmi<.
2021-01-08T21:44:04.210030900Z (bmicat: 17174 changes made)
2021-01-08T21:44:04.210052800Z 
2021-01-08T21:44:04.210074500Z . replace bmicat = .u if bmi>=.
2021-01-08T21:44:04.210096400Z (14,258 real changes made, 14,258 to missing)
2021-01-08T21:44:04.210118300Z 
2021-01-08T21:44:04.210140000Z . 
2021-01-08T21:44:04.210161800Z . label define bmicat 1 "Underweight (<18.5)"     ///
2021-01-08T21:44:04.210183900Z >                                         2 "Normal (18.5-24.9)"          ///
2021-01-08T21:44:04.210206000Z >                                         3 "Overweight (25-29.9)"        ///
2021-01-08T21:44:04.210228100Z >                                         4 "Obese I (30-34.9)"           ///
2021-01-08T21:44:04.210250400Z >                                         5 "Obese II (35-39.9)"          ///
2021-01-08T21:44:04.210272400Z >                                         6 "Obese III (40+)"                  
2021-01-08T21:44:04.210294500Z >    ///
2021-01-08T21:44:04.210317100Z >                                         .u "Unknown (.u)"
2021-01-08T21:44:04.210339300Z 
2021-01-08T21:44:04.210361300Z . label values bmicat bmicat
2021-01-08T21:44:04.210383400Z 
2021-01-08T21:44:04.210405200Z . 
2021-01-08T21:44:04.210427000Z . * Create more granular categorisation
2021-01-08T21:44:04.210448900Z . recode bmicat 1/3 .u = 1 4=2 5=3 6=4, gen(obese4cat)
2021-01-08T21:44:04.210470700Z (76955 differences between bmicat and obese4cat)
2021-01-08T21:44:04.210492600Z 
2021-01-08T21:44:04.210514300Z . 
2021-01-08T21:44:04.210536000Z . label define obese4cat  1 "No record of obesity"        ///
2021-01-08T21:44:04.210557900Z >                                                 2 "Obese I (30-34.9)"        
2021-01-08T21:44:04.210580000Z >    ///
2021-01-08T21:44:04.210601700Z >                                                 3 "Obese II (35-39.9)"       
2021-01-08T21:44:04.210623800Z >    ///
2021-01-08T21:44:04.210651200Z >                                                 4 "Obese III (40+)"          
2021-01-08T21:44:04.210673600Z >    
2021-01-08T21:44:04.210695500Z 
2021-01-08T21:44:04.210717300Z . label values obese4cat obese4cat
2021-01-08T21:44:04.210739200Z 
2021-01-08T21:44:04.210760900Z . order obese4cat, after(bmicat)
2021-01-08T21:44:04.210782700Z 
2021-01-08T21:44:04.210911500Z . 
2021-01-08T21:44:04.210934400Z . 
2021-01-08T21:44:04.210956300Z . 
2021-01-08T21:44:04.210978100Z . **generate BMI categories for south asians
2021-01-08T21:44:04.211003000Z . *https://www.nice.org.uk/guidance/ph46/chapter/1-Recommendations#recommendati
2021-01-08T21:44:04.211019200Z > on-2-bmi-assessment-multi-component-interventions-and-best-practice-standards
2021-01-08T21:44:04.211041700Z . 
2021-01-08T21:44:04.211063400Z . gen bmicat_sa=bmicat
2021-01-08T21:44:04.211085200Z (14,258 missing values generated)
2021-01-08T21:44:04.211107200Z 
2021-01-08T21:44:04.211129000Z . replace bmicat_sa = 2 if bmi>=18.5 & bmi <23 & eth5==2
2021-01-08T21:44:04.211151300Z (0 real changes made)
2021-01-08T21:44:04.211173100Z 
2021-01-08T21:44:04.211194900Z . replace bmicat_sa = 3 if bmi>=23 & bmi < 27.5 & eth5==2
2021-01-08T21:44:04.211217000Z (456 real changes made)
2021-01-08T21:44:04.211238800Z 
2021-01-08T21:44:04.211260600Z . replace bmicat_sa = 4 if bmi>=27.5 & bmi < 32.5 & eth5==2
2021-01-08T21:44:04.211282600Z (866 real changes made)
2021-01-08T21:44:04.211310900Z 
2021-01-08T21:44:04.211339200Z . replace bmicat_sa = 5 if bmi>=32.5 & bmi < 37.5 & eth5==2
2021-01-08T21:44:04.211367600Z (1,070 real changes made)
2021-01-08T21:44:04.211415000Z 
2021-01-08T21:44:04.211511500Z . replace bmicat_sa = 6 if bmi>=37.5 & bmi < . & eth5==2
2021-01-08T21:44:04.211620400Z (1,031 real changes made)
2021-01-08T21:44:04.211648300Z 
2021-01-08T21:44:04.211781100Z . replace bmicat_sa = 7 if bmi==.
2021-01-08T21:44:04.211808200Z (14,258 real changes made)
2021-01-08T21:44:04.211830600Z 
2021-01-08T21:44:04.211853000Z . 
2021-01-08T21:44:04.211876900Z . safetab bmicat_sa
2021-01-08T21:44:04.211898900Z 0
2021-01-08T21:44:04.211920900Z 
2021-01-08T21:44:04.211942700Z   bmicat_sa |      Freq.     Percent        Cum.
2021-01-08T21:44:04.211964600Z ------------+-----------------------------------
2021-01-08T21:44:04.211986600Z           1 |      1,910        2.42        2.42
2021-01-08T21:44:04.212008700Z           2 |      7,163        9.08       11.50
2021-01-08T21:44:04.212040300Z           3 |     10,160       12.88       24.39
2021-01-08T21:44:04.212062700Z           4 |     13,373       16.96       41.34
2021-01-08T21:44:04.212084700Z           5 |     13,796       17.49       58.84
2021-01-08T21:44:04.212106600Z           6 |     18,205       23.08       81.92
2021-01-08T21:44:04.212128600Z           7 |     14,258       18.08      100.00
2021-01-08T21:44:04.212150600Z ------------+-----------------------------------
2021-01-08T21:44:04.212172500Z       Total |     78,865      100.00
2021-01-08T21:44:04.212194300Z 
2021-01-08T21:44:04.212216100Z . 
2021-01-08T21:44:04.212237900Z . label define bmicat_sa 1 "Underweight (<18.5)"  ///
2021-01-08T21:44:04.212262000Z >                                         2 "Normal (18.5-24.9 / 22.9)"        
2021-01-08T21:44:04.212284400Z >    ///
2021-01-08T21:44:04.212306300Z >                                         3 "Overweight (25-29.9 / 23-27.4)"   
2021-01-08T21:44:04.212328500Z >    ///
2021-01-08T21:44:04.212350400Z >                                         4 "Obese I (30-34.9 / 27.4-32.4)"    
2021-01-08T21:44:04.212372500Z >            ///
2021-01-08T21:44:04.212394500Z >                                         5 "Obese II (35-39.9 / 32.5- 37.4)"  
2021-01-08T21:44:04.212416600Z >            ///
2021-01-08T21:44:04.212438600Z >                                         6 "Obese III (40+ / 37.5+)"          
2021-01-08T21:44:04.212460800Z >            ///
2021-01-08T21:44:04.212482700Z >                                         7 "Unknown"
2021-01-08T21:44:04.212504800Z 
2021-01-08T21:44:04.212526600Z . label values bmicat_sa bmicat_sa
2021-01-08T21:44:04.212548600Z 
2021-01-08T21:44:04.212570400Z . 
2021-01-08T21:44:04.212592100Z . * Create more granular categorisation
2021-01-08T21:44:04.212614100Z . recode bmicat_sa 1/3 .u = 1 4=2 5=3 6=4, gen(obese4cat_sa)
2021-01-08T21:44:04.212636000Z (62697 differences between bmicat_sa and obese4cat_sa)
2021-01-08T21:44:04.212658100Z 
2021-01-08T21:44:04.212680000Z . 
2021-01-08T21:44:04.212701700Z . label define obese4cat_sa       1 "No record of obesity"        ///
2021-01-08T21:44:04.212723600Z >                                                 2 "Obese I (30-34.9 / 27.5-32
2021-01-08T21:44:04.212745700Z > .5)"               ///
2021-01-08T21:44:04.212767600Z >                                                 3 "Obese II (35-39.9 / 32.5- 
2021-01-08T21:44:04.212789800Z > 37.4)"             ///
2021-01-08T21:44:04.212811700Z >                                                 4 "Obese III (40+ / 37.5+)"  
2021-01-08T21:44:04.212941000Z >            
2021-01-08T21:44:04.212969000Z 
2021-01-08T21:44:04.212991300Z . label values obese4cat_sa obese4cat_sa
2021-01-08T21:44:04.213014900Z 
2021-01-08T21:44:04.213036800Z . order obese4cat_sa, after(bmicat_sa)
2021-01-08T21:44:04.213058700Z 
2021-01-08T21:44:04.213080500Z . 
2021-01-08T21:44:04.213102400Z . 
2021-01-08T21:44:04.213124100Z . /*  Smoking  */
2021-01-08T21:44:04.213145900Z . 
2021-01-08T21:44:04.213167800Z . * Smoking 
2021-01-08T21:44:04.213189800Z . label define smoke 1 "Never" 2 "Former" 3 "Current" .u "Unknown (.u)"
2021-01-08T21:44:04.213212100Z 
2021-01-08T21:44:04.213233900Z . 
2021-01-08T21:44:04.213255800Z . gen     smoke = 1  if smoking_status == "N"
2021-01-08T21:44:04.213277700Z (75,722 missing values generated)
2021-01-08T21:44:04.213299700Z 
2021-01-08T21:44:04.213321500Z . replace smoke = 2  if smoking_status == "E"
2021-01-08T21:44:04.213343400Z (1,535 real changes made)
2021-01-08T21:44:04.213365300Z 
2021-01-08T21:44:04.213387100Z . replace smoke = 3  if smoking_status == "S"
2021-01-08T21:44:04.213409000Z (9,428 real changes made)
2021-01-08T21:44:04.213431000Z 
2021-01-08T21:44:04.213452800Z . replace smoke = .u if smoking_status == "M"
2021-01-08T21:44:04.213474800Z (1,650 real changes made, 1,650 to missing)
2021-01-08T21:44:04.213496700Z 
2021-01-08T21:44:04.213518400Z . replace smoke = .u if smoking_status == "" 
2021-01-08T21:44:04.213540200Z (63,109 real changes made, 63,109 to missing)
2021-01-08T21:44:04.213562200Z 
2021-01-08T21:44:04.213583900Z . 
2021-01-08T21:44:04.213605700Z . label values smoke smoke
2021-01-08T21:44:04.213627400Z 
2021-01-08T21:44:04.213649000Z . drop smoking_status
2021-01-08T21:44:04.213670700Z 
2021-01-08T21:44:04.213692300Z . 
2021-01-08T21:44:04.213714000Z . * Create non-missing 3-category variable for current smoking
2021-01-08T21:44:04.213736000Z . * Assumes missing smoking is never smoking 
2021-01-08T21:44:04.213757800Z . recode smoke .u = 1, gen(smoke_nomiss)
2021-01-08T21:44:04.213780000Z (64759 differences between smoke and smoke_nomiss)
2021-01-08T21:44:04.213879900Z 
2021-01-08T21:44:04.213902000Z . order smoke_nomiss, after(smoke)
2021-01-08T21:44:04.213923800Z 
2021-01-08T21:44:04.213945400Z . label values smoke_nomiss smoke
2021-01-08T21:44:04.213967300Z 
2021-01-08T21:44:04.213988900Z . 
2021-01-08T21:44:04.214010500Z . /* CLINICAL COMORBIDITIES */ 
2021-01-08T21:44:04.214040400Z . 
2021-01-08T21:44:04.214063700Z . /*  Cancer */
2021-01-08T21:44:04.214085600Z . label define cancer 1 "Never" 2 "Last year" 3 "2-5 years ago" 4 "5+ years"
2021-01-08T21:44:04.214107900Z 
2021-01-08T21:44:04.214129500Z . 
2021-01-08T21:44:04.214151200Z . * malignancies
2021-01-08T21:44:04.214173000Z . gen     cancer_cat = 4 if inrange(cancer_date, d(1/1/1900), d(1/2/2015))
2021-01-08T21:44:04.214195000Z (64,768 missing values generated)
2021-01-08T21:44:04.214216800Z 
2021-01-08T21:44:04.214238600Z . replace cancer_cat = 3 if inrange(cancer_date, d(1/2/2015), d(1/2/2019))
2021-01-08T21:44:04.214260500Z (1,243 real changes made)
2021-01-08T21:44:04.214282300Z 
2021-01-08T21:44:04.214304000Z . replace cancer_cat = 2 if inrange(cancer_date, d(1/2/2019), d(1/2/2020))
2021-01-08T21:44:04.214325800Z (323 real changes made)
2021-01-08T21:44:04.214347700Z 
2021-01-08T21:44:04.214369400Z . recode  cancer_cat . = 1
2021-01-08T21:44:04.214391200Z (cancer_cat: 63202 changes made)
2021-01-08T21:44:04.214413000Z 
2021-01-08T21:44:04.214434600Z . label values cancer_cat cancer
2021-01-08T21:44:04.214456400Z 
2021-01-08T21:44:04.214478100Z . 
2021-01-08T21:44:04.214499800Z . /*  Immunosuppression  */
2021-01-08T21:44:04.214521600Z . 
2021-01-08T21:44:04.214543300Z . * Immunosuppressed:
2021-01-08T21:44:04.214565100Z . * Permanent immunodeficiency ever, OR 
2021-01-08T21:44:04.214586900Z . * Temporary immunodeficiency  last year
2021-01-08T21:44:04.214608900Z . gen temp1  = 1 if perm_immunodef_date!=.
2021-01-08T21:44:04.214630800Z (63,061 missing values generated)
2021-01-08T21:44:04.214652500Z 
2021-01-08T21:44:04.214674200Z . gen temp2  = inrange(temp_immunodef_date, (indexdate - 365), indexdate)
2021-01-08T21:44:04.214696000Z 
2021-01-08T21:44:04.214717700Z . 
2021-01-08T21:44:04.214739500Z . 
2021-01-08T21:44:04.214761200Z . gen immunosuppressed=0
2021-01-08T21:44:04.214783000Z 
2021-01-08T21:44:04.214872500Z . replace immunosuppressed=1 if perm_immunodef==1 | temp_immunodef==1
2021-01-08T21:44:04.214897100Z (28,437 real changes made)
2021-01-08T21:44:04.214919100Z 
2021-01-08T21:44:04.214940800Z . safetab immunosuppressed
2021-01-08T21:44:04.214962600Z 0
2021-01-08T21:44:04.214984300Z 
2021-01-08T21:44:04.215006000Z immunosuppr |
2021-01-08T21:44:04.215027800Z       essed |      Freq.     Percent        Cum.
2021-01-08T21:44:04.215049800Z ------------+-----------------------------------
2021-01-08T21:44:04.215082200Z           0 |     50,428       63.94       63.94
2021-01-08T21:44:04.215104400Z           1 |     28,437       36.06      100.00
2021-01-08T21:44:04.215126200Z ------------+-----------------------------------
2021-01-08T21:44:04.215148100Z       Total |     78,865      100.00
2021-01-08T21:44:04.215169900Z 
2021-01-08T21:44:04.215212400Z . 
2021-01-08T21:44:04.215236100Z . /*  Blood pressure   */
2021-01-08T21:44:04.215258200Z . 
2021-01-08T21:44:04.215280100Z . /*set implausible BP values to missing
2021-01-08T21:44:04.215302000Z > https://onlinelibrary.wiley.com/doi/full/10.1111/jch.12743
2021-01-08T21:44:04.215324100Z > SBP (DBP) values outside of the range of 50\u2013300 (30\u2013250) mm Hg were considere
2021-01-08T21:44:04.215346400Z > d implausible and threrefore excluded. */
2021-01-08T21:44:04.215368400Z . 
2021-01-08T21:44:04.215390200Z . replace bp_sys=. if bp_sys<50 | bp_sys>300
2021-01-08T21:44:04.215412400Z (87 real changes made, 87 to missing)
2021-01-08T21:44:04.215434400Z 
2021-01-08T21:44:04.215456100Z . replace bp_dias=. if bp_dias<30 | bp_dias>250
2021-01-08T21:44:04.215478200Z (0 real changes made)
2021-01-08T21:44:04.215500100Z 
2021-01-08T21:44:04.215521900Z . 
2021-01-08T21:44:04.215543900Z . * Categorise
2021-01-08T21:44:04.215565800Z . gen     bpcat = 1 if bp_sys < 120 &  bp_dias < 80
2021-01-08T21:44:04.215588000Z (78,861 missing values generated)
2021-01-08T21:44:04.215610100Z 
2021-01-08T21:44:04.215631900Z . replace bpcat = 2 if inrange(bp_sys, 120, 130) & bp_dias<80
2021-01-08T21:44:04.215654000Z (0 real changes made)
2021-01-08T21:44:04.215675900Z 
2021-01-08T21:44:04.215697800Z . replace bpcat = 3 if inrange(bp_sys, 130, 140) | inrange(bp_dias, 80, 90)
2021-01-08T21:44:04.215719900Z (110 real changes made)
2021-01-08T21:44:04.215741900Z 
2021-01-08T21:44:04.215764800Z . replace bpcat = 4 if (bp_sys>=140 & bp_sys<.) | (bp_dias>=90 & bp_dias<.) 
2021-01-08T21:44:04.215787400Z (74,793 real changes made)
2021-01-08T21:44:04.215816900Z 
2021-01-08T21:44:04.215913100Z . replace bpcat = 5 if bp_sys>=. | bp_dias>=. | bp_sys==0 | bp_dias==0
2021-01-08T21:44:04.215962300Z (7,792 real changes made)
2021-01-08T21:44:04.215984500Z 
2021-01-08T21:44:04.216006300Z . 
2021-01-08T21:44:04.216028600Z . label define bpcat 1 "Normal" 2 "Elevated" 3 "High, stage I"    ///
2021-01-08T21:44:04.216062700Z >                                         4 "High, stage II" 5 "Unknown"
2021-01-08T21:44:04.216085200Z 
2021-01-08T21:44:04.216113500Z . label values bpcat bpcat
2021-01-08T21:44:04.216135800Z 
2021-01-08T21:44:04.216157700Z . 
2021-01-08T21:44:04.216179500Z . recode bpcat 5=1, gen(bpcat_nomiss)
2021-01-08T21:44:04.216201500Z (7792 differences between bpcat and bpcat_nomiss)
2021-01-08T21:44:04.216223400Z 
2021-01-08T21:44:04.216245200Z . label values bpcat_nomiss bpcat
2021-01-08T21:44:04.216267100Z 
2021-01-08T21:44:04.216288900Z . 
2021-01-08T21:44:04.216310700Z . * Create non-missing indicator of known high blood pressure
2021-01-08T21:44:04.216332600Z . gen bphigh = (bpcat==4)
2021-01-08T21:44:04.216354500Z 
2021-01-08T21:44:04.216376300Z . 
2021-01-08T21:44:04.216398200Z . /*  Hypertension  */
2021-01-08T21:44:04.216420100Z . 
2021-01-08T21:44:04.216441900Z . gen htdiag_or_highbp = bphigh
2021-01-08T21:44:04.216463900Z 
2021-01-08T21:44:04.216485700Z . recode htdiag_or_highbp 0 = 1 if hypertension==1 
2021-01-08T21:44:04.216507600Z (htdiag_or_highbp: 1571 changes made)
2021-01-08T21:44:04.216529700Z 
2021-01-08T21:44:04.216551500Z . 
2021-01-08T21:44:04.216573400Z . 
2021-01-08T21:44:04.216595300Z . 
2021-01-08T21:44:04.216617200Z . *Mean arterial pressure MAP = (SBP+(DBP*2))/3
2021-01-08T21:44:04.216639200Z . gen bp_map=(bp_sys + (bp_dias*2))/3
2021-01-08T21:44:04.216661200Z (7,792 missing values generated)
2021-01-08T21:44:04.216683200Z 
2021-01-08T21:44:04.216705000Z . 
2021-01-08T21:44:04.216726900Z . ren bpcat bp_cat
2021-01-08T21:44:04.216748900Z 
2021-01-08T21:44:04.216770600Z . ************
2021-01-08T21:44:04.216858300Z . *   eGFR   *
2021-01-08T21:44:04.216880600Z . ************
2021-01-08T21:44:04.216902400Z . 
2021-01-08T21:44:04.216924500Z . * Set implausible creatinine values to missing (Note: zero changed to missing
2021-01-08T21:44:04.216946500Z > )
2021-01-08T21:44:04.216997700Z . replace creatinine = . if !inrange(creatinine, 20, 3000) 
2021-01-08T21:44:04.217024400Z (287 real changes made, 287 to missing)
2021-01-08T21:44:04.217050200Z 
2021-01-08T21:44:04.217128900Z .         
2021-01-08T21:44:04.217157900Z . * Divide by 88.4 (to convert umol/l to mg/dl)
2021-01-08T21:44:04.217180800Z . gen SCr_adj = creatinine/88.4
2021-01-08T21:44:04.217202800Z (4,203 missing values generated)
2021-01-08T21:44:04.217224700Z 
2021-01-08T21:44:04.217246500Z . 
2021-01-08T21:44:04.217268300Z . gen min=.
2021-01-08T21:44:04.217290200Z (78,865 missing values generated)
2021-01-08T21:44:04.217320000Z 
2021-01-08T21:44:04.217342400Z . replace min = SCr_adj/0.7 if male==0
2021-01-08T21:44:04.217364300Z (38,134 real changes made)
2021-01-08T21:44:04.217386200Z 
2021-01-08T21:44:04.217407900Z . replace min = SCr_adj/0.9 if male==1
2021-01-08T21:44:04.217429700Z (36,528 real changes made)
2021-01-08T21:44:04.217451600Z 
2021-01-08T21:44:04.217473300Z . replace min = min^-0.329  if male==0
2021-01-08T21:44:04.217495200Z (38,134 real changes made)
2021-01-08T21:44:04.217517000Z 
2021-01-08T21:44:04.217538600Z . replace min = min^-0.411  if male==1
2021-01-08T21:44:04.217560700Z (36,528 real changes made)
2021-01-08T21:44:04.217582700Z 
2021-01-08T21:44:04.217604400Z . replace min = 1 if min<1
2021-01-08T21:44:04.217626400Z (20,635 real changes made)
2021-01-08T21:44:04.217648200Z 
2021-01-08T21:44:04.217669900Z . 
2021-01-08T21:44:04.217691600Z . gen max=.
2021-01-08T21:44:04.217713500Z (78,865 missing values generated)
2021-01-08T21:44:04.217735300Z 
2021-01-08T21:44:04.217756900Z . replace max=SCr_adj/0.7 if male==0
2021-01-08T21:44:04.217778800Z (38,134 real changes made)
2021-01-08T21:44:04.217808700Z 
2021-01-08T21:44:04.217830600Z . replace max=SCr_adj/0.9 if male==1
2021-01-08T21:44:04.217928800Z (36,528 real changes made)
2021-01-08T21:44:04.217950900Z 
2021-01-08T21:44:04.217972800Z . replace max=max^-1.209
2021-01-08T21:44:04.217994700Z (74,662 real changes made)
2021-01-08T21:44:04.218016500Z 
2021-01-08T21:44:04.218038200Z . replace max=1 if max>1
2021-01-08T21:44:04.218060200Z (58,230 real changes made)
2021-01-08T21:44:04.218082100Z 
2021-01-08T21:44:04.218104100Z . 
2021-01-08T21:44:04.218125900Z . gen egfr=min*max*141
2021-01-08T21:44:04.218147700Z (4,203 missing values generated)
2021-01-08T21:44:04.218169600Z 
2021-01-08T21:44:04.218191300Z . replace egfr=egfr*(0.993^age)
2021-01-08T21:44:04.218213200Z (74,662 real changes made)
2021-01-08T21:44:04.218234900Z 
2021-01-08T21:44:04.218256600Z . replace egfr=egfr*1.018 if male==0
2021-01-08T21:44:04.218278400Z (38,134 real changes made)
2021-01-08T21:44:04.218300400Z 
2021-01-08T21:44:04.218323600Z . label var egfr "egfr calculated using CKD-EPI formula with no eth"
2021-01-08T21:44:04.218345900Z 
2021-01-08T21:44:04.218367800Z . 
2021-01-08T21:44:04.218389700Z . * Categorise into ckd stages
2021-01-08T21:44:04.218417200Z . egen egfr_cat = cut(egfr), at(0, 30, 60, 5000)
2021-01-08T21:44:04.218439300Z (4203 missing values generated)
2021-01-08T21:44:04.218461200Z 
2021-01-08T21:44:04.218482900Z . 
2021-01-08T21:44:04.218504600Z . label define egfr_cat 5000 "None" 60 "Stage 3 egfr 30-6" 30 "Stage 4/5 egfr<3
2021-01-08T21:44:04.218526800Z > 0"
2021-01-08T21:44:04.218548600Z 
2021-01-08T21:44:04.218570400Z . label values egfr_cat egfr_cat 
2021-01-08T21:44:04.218592300Z 
2021-01-08T21:44:04.218614000Z . lab var  egfr_cat "CKD category"
2021-01-08T21:44:04.218636000Z 
2021-01-08T21:44:04.218657800Z . safetab egfr_cat
2021-01-08T21:44:04.218679600Z 0
2021-01-08T21:44:04.218701400Z 
2021-01-08T21:44:04.218723100Z      CKD category |      Freq.     Percent        Cum.
2021-01-08T21:44:04.218745200Z ------------------+-----------------------------------
2021-01-08T21:44:04.218767000Z Stage 4/5 egfr<30 |        935        1.25        1.25
2021-01-08T21:44:04.218853300Z Stage 3 egfr 30-6 |     73,727       98.75      100.00
2021-01-08T21:44:04.218876900Z ------------------+-----------------------------------
2021-01-08T21:44:04.218898900Z             Total |     74,662      100.00
2021-01-08T21:44:04.218920700Z 
2021-01-08T21:44:04.218942500Z . 
2021-01-08T21:44:04.218964200Z . gen egfr60=0
2021-01-08T21:44:04.218986000Z 
2021-01-08T21:44:04.219007700Z . replace egfr60=1 if egfr<60
2021-01-08T21:44:04.219029600Z (935 real changes made)
2021-01-08T21:44:04.219051200Z 
2021-01-08T21:44:04.219072800Z . lab define egfr60 0"egfr >=60" 1"eGFR <60"
2021-01-08T21:44:04.219096300Z 
2021-01-08T21:44:04.219118100Z . label values egfr60 egfr60
2021-01-08T21:44:04.219139900Z 
2021-01-08T21:44:04.219161600Z . tab egfr60
2021-01-08T21:44:04.219183300Z 
2021-01-08T21:44:04.219205000Z      egfr60 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.219226900Z ------------+-----------------------------------
2021-01-08T21:44:04.219255500Z   egfr >=60 |     77,930       98.81       98.81
2021-01-08T21:44:04.219285900Z    eGFR <60 |        935        1.19      100.00
2021-01-08T21:44:04.219328700Z ------------+-----------------------------------
2021-01-08T21:44:04.219427100Z       Total |     78,865      100.00
2021-01-08T21:44:04.219517200Z 
2021-01-08T21:44:04.219544600Z . 
2021-01-08T21:44:04.219581500Z . /* Hb1AC */
2021-01-08T21:44:04.219603900Z . 
2021-01-08T21:44:04.219625700Z . /*  Diabetes severity  */
2021-01-08T21:44:04.219655400Z . 
2021-01-08T21:44:04.219677600Z . * Set zero or negative to missing
2021-01-08T21:44:04.219699500Z . replace hba1c_percentage   = . if hba1c_percentage <= 0
2021-01-08T21:44:04.219721700Z (499 real changes made, 499 to missing)
2021-01-08T21:44:04.219743600Z 
2021-01-08T21:44:04.219765400Z . replace hba1c_mmol_per_mol = . if hba1c_mmol_per_mol <= 0
2021-01-08T21:44:04.219787400Z (1,695 real changes made, 1,695 to missing)
2021-01-08T21:44:04.219885000Z 
2021-01-08T21:44:04.219907200Z . 
2021-01-08T21:44:04.219928900Z . /* Express  HbA1c as percentage  */ 
2021-01-08T21:44:04.219950800Z . 
2021-01-08T21:44:04.219972600Z . * Express all values as perecentage 
2021-01-08T21:44:04.219994400Z . noi summ hba1c_percentage hba1c_mmol_per_mol 
2021-01-08T21:44:04.220016200Z 
2021-01-08T21:44:04.220038000Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.220059800Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.220081600Z hba1c_per~ge |     74,404    5.029923    1.954359   .0026761   13.09241
2021-01-08T21:44:04.220103400Z hba1c_mmol~l |     73,227    41.16461    18.86124    .005628   123.1683
2021-01-08T21:44:04.220125300Z 
2021-01-08T21:44:04.220147100Z . gen     hba1c_pct = hba1c_percentage 
2021-01-08T21:44:04.220168800Z (4,461 missing values generated)
2021-01-08T21:44:04.220190500Z 
2021-01-08T21:44:04.220212200Z . replace hba1c_pct = (hba1c_mmol_per_mol/10.929)+2.15 if hba1c_mmol_per_mol<. 
2021-01-08T21:44:04.220234200Z (73,227 real changes made)
2021-01-08T21:44:04.220255900Z 
2021-01-08T21:44:04.220277700Z . 
2021-01-08T21:44:04.220302900Z . * Valid % range between 0-20  /195 mmol/mol
2021-01-08T21:44:04.220325100Z . replace hba1c_pct = . if !inrange(hba1c_pct, 0, 20) 
2021-01-08T21:44:04.220347000Z (0 real changes made)
2021-01-08T21:44:04.220368700Z 
2021-01-08T21:44:04.220390500Z . replace hba1c_pct = round(hba1c_pct, 0.1)
2021-01-08T21:44:04.220412300Z (78,578 real changes made)
2021-01-08T21:44:04.220434000Z 
2021-01-08T21:44:04.220455700Z . 
2021-01-08T21:44:04.220477400Z . 
2021-01-08T21:44:04.220499000Z . /* Categorise hba1c and diabetes  */
2021-01-08T21:44:04.220520600Z . /* Diabetes type */
2021-01-08T21:44:04.220542200Z . gen dm_type=1 if diabetes_type=="T1DM"
2021-01-08T21:44:04.220564100Z (76,543 missing values generated)
2021-01-08T21:44:04.220585800Z 
2021-01-08T21:44:04.220607400Z . replace dm_type=2 if diabetes_type=="T2DM"
2021-01-08T21:44:04.220629300Z (15,825 real changes made)
2021-01-08T21:44:04.220656900Z 
2021-01-08T21:44:04.220679000Z . replace dm_type=3 if diabetes_type=="UNKNOWN_DM"
2021-01-08T21:44:04.220701000Z (1,563 real changes made)
2021-01-08T21:44:04.220722800Z 
2021-01-08T21:44:04.220744500Z . replace dm_type=0 if diabetes_type=="NO_DM"
2021-01-08T21:44:04.220766500Z (59,155 real changes made)
2021-01-08T21:44:04.220788400Z 
2021-01-08T21:44:04.220880200Z . 
2021-01-08T21:44:04.220902300Z . safetab dm_type diabetes_type
2021-01-08T21:44:04.220924100Z 0
2021-01-08T21:44:04.220945800Z 
2021-01-08T21:44:04.220967500Z            |                diabetes_type
2021-01-08T21:44:04.220989200Z    dm_type |     NO_DM       T1DM       T2DM  UNKNOWN.. |     Total
2021-01-08T21:44:04.221011100Z -----------+--------------------------------------------+----------
2021-01-08T21:44:04.221033000Z          0 |    59,155          0          0          0 |    59,155 
2021-01-08T21:44:04.221055000Z          1 |         0      2,322          0          0 |     2,322 
2021-01-08T21:44:04.221076900Z          2 |         0          0     15,825          0 |    15,825 
2021-01-08T21:44:04.221098800Z          3 |         0          0          0      1,563 |     1,563 
2021-01-08T21:44:04.221120700Z -----------+--------------------------------------------+----------
2021-01-08T21:44:04.221142700Z      Total |    59,155      2,322     15,825      1,563 |    78,865 
2021-01-08T21:44:04.221164600Z 
2021-01-08T21:44:04.221186300Z . label define dm_type 0"No DM" 1"T1DM" 2"T2DM" 3"UNKNOWN_DM"
2021-01-08T21:44:04.221208600Z 
2021-01-08T21:44:04.221230300Z . label values dm_type dm_type
2021-01-08T21:44:04.221252000Z 
2021-01-08T21:44:04.221273700Z . 
2021-01-08T21:44:04.221295400Z . *Open safely diabetes codes with exeter algorithm
2021-01-08T21:44:04.221317300Z . gen dm_type_exeter_os=1 if diabetes_exeter_os=="T1DM_EX_OS"
2021-01-08T21:44:04.221339300Z (76,427 missing values generated)
2021-01-08T21:44:04.221360900Z 
2021-01-08T21:44:04.221382500Z . replace dm_type_exeter_os=2 if diabetes_exeter_os=="T2DM_EX_OS"
2021-01-08T21:44:04.221404400Z (15,652 real changes made)
2021-01-08T21:44:04.221426100Z 
2021-01-08T21:44:04.221447800Z . replace dm_type_exeter_os=0 if diabetes_exeter_os=="NO_DM"
2021-01-08T21:44:04.221469700Z (60,775 real changes made)
2021-01-08T21:44:04.221491600Z 
2021-01-08T21:44:04.221513300Z . label values  dm_type_exeter_os dm_type
2021-01-08T21:44:04.221535100Z 
2021-01-08T21:44:04.221556800Z . 
2021-01-08T21:44:04.221578400Z . * Group hba1c
2021-01-08T21:44:04.221600200Z . gen     hba1ccat = 0 if hba1c_pct <  6.5
2021-01-08T21:44:04.221627600Z (28,868 missing values generated)
2021-01-08T21:44:04.221649800Z 
2021-01-08T21:44:04.221671600Z . replace hba1ccat = 1 if hba1c_pct >= 6.5  & hba1c_pct < 7.5
2021-01-08T21:44:04.221695400Z (13,944 real changes made)
2021-01-08T21:44:04.221717400Z 
2021-01-08T21:44:04.221739200Z . replace hba1ccat = 2 if hba1c_pct >= 7.5  & hba1c_pct < 8
2021-01-08T21:44:04.221761400Z (5,028 real changes made)
2021-01-08T21:44:04.221783300Z 
2021-01-08T21:44:04.221873100Z . replace hba1ccat = 3 if hba1c_pct >= 8    & hba1c_pct < 9
2021-01-08T21:44:04.221897100Z (6,259 real changes made)
2021-01-08T21:44:04.221919000Z 
2021-01-08T21:44:04.221941200Z . replace hba1ccat = 4 if hba1c_pct >= 9    & hba1c_pct !=.
2021-01-08T21:44:04.221963400Z (3,351 real changes made)
2021-01-08T21:44:04.221985200Z 
2021-01-08T21:44:04.222006900Z . replace hba1ccat = 5 if hba1c_pct==.
2021-01-08T21:44:04.222028700Z (286 real changes made)
2021-01-08T21:44:04.222050400Z 
2021-01-08T21:44:04.222072000Z . label define hba1ccat 0 "<6.5%" 1">=6.5-7.4" 2">=7.5-7.9" 3">=8-8.9" 4">=9" 5
2021-01-08T21:44:04.222094600Z > "Unknown"
2021-01-08T21:44:04.222116400Z 
2021-01-08T21:44:04.222138000Z . label values hba1ccat hba1ccat
2021-01-08T21:44:04.222159700Z 
2021-01-08T21:44:04.222181300Z . safetab hba1ccat
2021-01-08T21:44:04.222203100Z 0
2021-01-08T21:44:04.222224800Z 
2021-01-08T21:44:04.222246400Z    hba1ccat |      Freq.     Percent        Cum.
2021-01-08T21:44:04.222268200Z ------------+-----------------------------------
2021-01-08T21:44:04.222290100Z       <6.5% |     49,997       63.40       63.40
2021-01-08T21:44:04.222311900Z   >=6.5-7.4 |     13,944       17.68       81.08
2021-01-08T21:44:04.222333800Z   >=7.5-7.9 |      5,028        6.38       87.45
2021-01-08T21:44:04.222355600Z     >=8-8.9 |      6,259        7.94       95.39
2021-01-08T21:44:04.222377600Z         >=9 |      3,351        4.25       99.64
2021-01-08T21:44:04.222399400Z     Unknown |        286        0.36      100.00
2021-01-08T21:44:04.222421300Z ------------+-----------------------------------
2021-01-08T21:44:04.222443200Z       Total |     78,865      100.00
2021-01-08T21:44:04.222465000Z 
2021-01-08T21:44:04.222486700Z . 
2021-01-08T21:44:04.222508400Z . gen hba1c75=0 if hba1c_pct<7.5
2021-01-08T21:44:04.222530400Z (14,924 missing values generated)
2021-01-08T21:44:04.222552100Z 
2021-01-08T21:44:04.222573800Z . replace hba1c75=1 if hba1c_pct>=7.5 & hba1c_pct!=.
2021-01-08T21:44:04.222601100Z (14,638 real changes made)
2021-01-08T21:44:04.222623300Z 
2021-01-08T21:44:04.222645100Z . label define hba1c75 0"<7.5" 1">=7.5"
2021-01-08T21:44:04.222667300Z 
2021-01-08T21:44:04.222689100Z . safetab hba1c75, m
2021-01-08T21:44:04.222710800Z 8
2021-01-08T21:44:04.222732600Z 
2021-01-08T21:44:04.222754300Z     hba1c75 |      Freq.     Percent        Cum.
2021-01-08T21:44:04.222776200Z ------------+-----------------------------------
2021-01-08T21:44:04.223101200Z           0 |     63,941       81.08       81.08
2021-01-08T21:44:04.223148000Z           1 |     14,638       18.56       99.64
2021-01-08T21:44:04.223175600Z           . |        286        0.36      100.00
2021-01-08T21:44:04.223202500Z ------------+-----------------------------------
2021-01-08T21:44:04.223230400Z       Total |     78,865      100.00
2021-01-08T21:44:04.223288300Z 
2021-01-08T21:44:04.223357500Z . 
2021-01-08T21:44:04.223379900Z . * Create diabetes, split by control/not
2021-01-08T21:44:04.223402000Z . gen     diabcat = 1 if dm_type==0
2021-01-08T21:44:04.223423900Z (19,710 missing values generated)
2021-01-08T21:44:04.223446500Z 
2021-01-08T21:44:04.223468400Z . replace diabcat = 2 if dm_type==1 & inlist(hba1ccat, 0, 1)
2021-01-08T21:44:04.223490600Z (1,870 real changes made)
2021-01-08T21:44:04.223512500Z 
2021-01-08T21:44:04.223534300Z . replace diabcat = 3 if dm_type==1 & inlist(hba1ccat, 2, 3, 4)
2021-01-08T21:44:04.223556200Z (442 real changes made)
2021-01-08T21:44:04.223578100Z 
2021-01-08T21:44:04.223600000Z . replace diabcat = 4 if dm_type==2 & inlist(hba1ccat, 0, 1)
2021-01-08T21:44:04.223621800Z (12,836 real changes made)
2021-01-08T21:44:04.223643500Z 
2021-01-08T21:44:04.223665200Z . replace diabcat = 5 if dm_type==2 & inlist(hba1ccat, 2, 3, 4)
2021-01-08T21:44:04.223687000Z (2,927 real changes made)
2021-01-08T21:44:04.223708800Z 
2021-01-08T21:44:04.223730400Z . replace diabcat = 6 if dm_type==1 & hba1c_pct==. | dm_type==2 & hba1c_pct==.
2021-01-08T21:44:04.223752200Z (72 real changes made)
2021-01-08T21:44:04.223777400Z 
2021-01-08T21:44:04.223799300Z . 
2021-01-08T21:44:04.223898600Z . 
2021-01-08T21:44:04.223920500Z . label define diabcat    1 "No diabetes"                         ///
2021-01-08T21:44:04.223942700Z >                                                 2 "T1DM, controlled"         
2021-01-08T21:44:04.223964900Z >    ///
2021-01-08T21:44:04.223989100Z >                                                 3 "T1DM, uncontrolled"       
2021-01-08T21:44:04.224024100Z >    ///
2021-01-08T21:44:04.224046300Z >                                                 4 "T2DM, controlled"         
2021-01-08T21:44:04.224068500Z >    ///
2021-01-08T21:44:04.224090400Z >                                                 5 "T2DM, uncontrolled"       
2021-01-08T21:44:04.224112500Z >    ///
2021-01-08T21:44:04.224134500Z >                                                 6 "Diabetes, no HbA1c"
2021-01-08T21:44:04.224156400Z 
2021-01-08T21:44:04.224178100Z . label values diabcat diabcat
2021-01-08T21:44:04.224199900Z 
2021-01-08T21:44:04.224221700Z . safetab diabcat, m
2021-01-08T21:44:04.224243500Z 8
2021-01-08T21:44:04.224265200Z 
2021-01-08T21:44:04.224287100Z            diabcat |      Freq.     Percent        Cum.
2021-01-08T21:44:04.224309000Z -------------------+-----------------------------------
2021-01-08T21:44:04.224330800Z        No diabetes |     59,155       75.01       75.01
2021-01-08T21:44:04.224352500Z   T1DM, controlled |      1,870        2.37       77.38
2021-01-08T21:44:04.224374300Z T1DM, uncontrolled |        442        0.56       77.94
2021-01-08T21:44:04.224396200Z   T2DM, controlled |     12,836       16.28       94.22
2021-01-08T21:44:04.224419300Z T2DM, uncontrolled |      2,927        3.71       97.93
2021-01-08T21:44:04.224441300Z Diabetes, no HbA1c |         72        0.09       98.02
2021-01-08T21:44:04.224463200Z                  . |      1,563        1.98      100.00
2021-01-08T21:44:04.224485200Z -------------------+-----------------------------------
2021-01-08T21:44:04.224507100Z              Total |     78,865      100.00
2021-01-08T21:44:04.224528900Z 
2021-01-08T21:44:04.224550700Z . 
2021-01-08T21:44:04.224572400Z . /*  Asthma  */
2021-01-08T21:44:04.224594200Z . * Asthma  (coded: 0 No, 1 Yes no OCS, 2 Yes with OCS)
2021-01-08T21:44:04.224616200Z . safetab asthma
2021-01-08T21:44:04.224638100Z 0
2021-01-08T21:44:04.224659900Z 
2021-01-08T21:44:04.224681800Z      asthma |      Freq.     Percent        Cum.
2021-01-08T21:44:04.224703800Z ------------+-----------------------------------
2021-01-08T21:44:04.224725700Z           0 |     12,670       80.25       80.25
2021-01-08T21:44:04.224747600Z           1 |      1,600       10.13       90.39
2021-01-08T21:44:04.224769500Z           2 |      1,518        9.61      100.00
2021-01-08T21:44:04.224861400Z ------------+-----------------------------------
2021-01-08T21:44:04.224885300Z       Total |     15,788      100.00
2021-01-08T21:44:04.224907300Z 
2021-01-08T21:44:04.224929000Z . replace asthma=0 if asthma==.
2021-01-08T21:44:04.224957200Z (63,077 real changes made)
2021-01-08T21:44:04.224979400Z 
2021-01-08T21:44:04.225001300Z . replace asthma=1 if asthma==2
2021-01-08T21:44:04.225023200Z (1,518 real changes made)
2021-01-08T21:44:04.225045000Z 
2021-01-08T21:44:04.225066700Z . safetab asthma
2021-01-08T21:44:04.225088600Z 0
2021-01-08T21:44:04.225110300Z 
2021-01-08T21:44:04.225132100Z      asthma |      Freq.     Percent        Cum.
2021-01-08T21:44:04.225154000Z ------------+-----------------------------------
2021-01-08T21:44:04.225175900Z           0 |     75,747       96.05       96.05
2021-01-08T21:44:04.225197800Z           1 |      3,118        3.95      100.00
2021-01-08T21:44:04.225219700Z ------------+-----------------------------------
2021-01-08T21:44:04.225241500Z       Total |     78,865      100.00
2021-01-08T21:44:04.225263300Z 
2021-01-08T21:44:04.225285100Z . 
2021-01-08T21:44:04.225307000Z . *gen count of co-morbidities
2021-01-08T21:44:04.225329000Z . gen comorbidity_count=0
2021-01-08T21:44:04.225350800Z 
2021-01-08T21:44:04.225372600Z . 
2021-01-08T21:44:04.225394300Z . foreach var of varlist  chronic_respiratory_disease ///
2021-01-08T21:44:04.225416300Z >                                                 chronic_cardiac_disease  ///
2021-01-08T21:44:04.225439100Z >                                                 cancer  ///
2021-01-08T21:44:04.225461200Z >                                                 perm_immunodef  ///
2021-01-08T21:44:04.225483100Z >                                                 temp_immunodef  ///
2021-01-08T21:44:04.225505000Z >                                                 chronic_liver_disease  ///
2021-01-08T21:44:04.225527100Z >                                                 other_neuro  ///
2021-01-08T21:44:04.225557100Z >                                                 stroke                  ///
2021-01-08T21:44:04.225579500Z >                                                 dementia ///
2021-01-08T21:44:04.225601500Z >                                                 esrf  ///
2021-01-08T21:44:04.225623400Z >                                                 hypertension  ///
2021-01-08T21:44:04.225645400Z >                                                 asthma ///
2021-01-08T21:44:04.225667300Z >                                                 ra_sle_psoriasis  ///
2021-01-08T21:44:04.225689200Z >                                                 {
2021-01-08T21:44:04.225711100Z   2. replace comorbidity_count=comorbidity_count+1 if `var'==1
2021-01-08T21:44:04.225733200Z   3.                                                 }
2021-01-08T21:44:04.225760300Z (15,675 real changes made)
2021-01-08T21:44:04.225782500Z (15,855 real changes made)
2021-01-08T21:44:04.225869300Z (15,663 real changes made)
2021-01-08T21:44:04.225891500Z (15,804 real changes made)
2021-01-08T21:44:04.225913300Z (15,793 real changes made)
2021-01-08T21:44:04.225935100Z (15,710 real changes made)
2021-01-08T21:44:04.225956900Z (15,792 real changes made)
2021-01-08T21:44:04.225978900Z (15,789 real changes made)
2021-01-08T21:44:04.226000800Z (15,833 real changes made)
2021-01-08T21:44:04.226022500Z (15,821 real changes made)
2021-01-08T21:44:04.226119100Z (15,796 real changes made)
2021-01-08T21:44:04.226141200Z (3,118 real changes made)
2021-01-08T21:44:04.226163100Z (15,743 real changes made)
2021-01-08T21:44:04.226184900Z 
2021-01-08T21:44:04.226206700Z . 
2021-01-08T21:44:04.226228500Z . summ comorbidity_count
2021-01-08T21:44:04.226250300Z 
2021-01-08T21:44:04.226272000Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.226293900Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.226316000Z comorbidit~t |     78,865    2.439511    1.399186          0          9
2021-01-08T21:44:04.226337900Z 
2021-01-08T21:44:04.226359600Z . 
2021-01-08T21:44:04.226381300Z . *comorbidities category 
2021-01-08T21:44:04.226403100Z . gen comorbidity_cat =comorbidity_count
2021-01-08T21:44:04.226424900Z 
2021-01-08T21:44:04.226446600Z . replace comorbidity_cat=4 if comorbidity_count>=4 & comorbidity_count!=.
2021-01-08T21:44:04.226468700Z (6,188 real changes made)
2021-01-08T21:44:04.226490400Z 
2021-01-08T21:44:04.226512100Z . bysort comorbidity_cat: sum comorbidity_count
2021-01-08T21:44:04.226534000Z 
2021-01-08T21:44:04.226555900Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.226577800Z -> comorbidity_cat = 0
2021-01-08T21:44:04.226599600Z 
2021-01-08T21:44:04.226621400Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.226643400Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.226665300Z comorbidi~nt |      5,168           0           0          0          0
2021-01-08T21:44:04.226687100Z 
2021-01-08T21:44:04.226709800Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.226732000Z -> comorbidity_cat = 1
2021-01-08T21:44:04.226830500Z 
2021-01-08T21:44:04.226852400Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.226879800Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.226902100Z comorbidi~nt |     15,817           1           0          1          1
2021-01-08T21:44:04.226924100Z 
2021-01-08T21:44:04.226946100Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.226968100Z -> comorbidity_cat = 2
2021-01-08T21:44:04.226989900Z 
2021-01-08T21:44:04.227011700Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.227033700Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.227055500Z comorbidi~nt |     22,241           2           0          2          2
2021-01-08T21:44:04.227077400Z 
2021-01-08T21:44:04.227099200Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.227121100Z -> comorbidity_cat = 3
2021-01-08T21:44:04.227143200Z 
2021-01-08T21:44:04.227165100Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.227187000Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.227216000Z comorbidi~nt |     18,812           3           0          3          3
2021-01-08T21:44:04.227244600Z 
2021-01-08T21:44:04.227272700Z -------------------------------------------------------------------------------
2021-01-08T21:44:04.227319100Z -> comorbidity_cat = 4
2021-01-08T21:44:04.227525400Z 
2021-01-08T21:44:04.227555700Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.227656100Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.227682400Z comorbidi~nt |     16,827    4.496167    .7506288          4          9
2021-01-08T21:44:04.227704800Z 
2021-01-08T21:44:04.227726700Z 
2021-01-08T21:44:04.227748500Z . safetab comorbidity_cat,m
2021-01-08T21:44:04.227770600Z 16
2021-01-08T21:44:04.227792300Z 
2021-01-08T21:44:04.227817100Z comorbidity |
2021-01-08T21:44:04.227914500Z        _cat |      Freq.     Percent        Cum.
2021-01-08T21:44:04.227938700Z ------------+-----------------------------------
2021-01-08T21:44:04.227961000Z           0 |      5,168        6.55        6.55
2021-01-08T21:44:04.227983000Z           1 |     15,817       20.06       26.61
2021-01-08T21:44:04.228005100Z           2 |     22,241       28.20       54.81
2021-01-08T21:44:04.228027100Z           3 |     18,812       23.85       78.66
2021-01-08T21:44:04.228049000Z           4 |     16,827       21.34      100.00
2021-01-08T21:44:04.228071100Z ------------+-----------------------------------
2021-01-08T21:44:04.228102600Z       Total |     78,865      100.00
2021-01-08T21:44:04.228125100Z 
2021-01-08T21:44:04.228147000Z . 
2021-01-08T21:44:04.228168900Z . *******************************
2021-01-08T21:44:04.228190900Z . *  Recode implausible values  *
2021-01-08T21:44:04.228212800Z . *******************************
2021-01-08T21:44:04.228234800Z . 
2021-01-08T21:44:04.228256700Z . *make combination_bp_meds binary
2021-01-08T21:44:04.228278700Z . safetab combination_bp_meds
2021-01-08T21:44:04.228300500Z 0
2021-01-08T21:44:04.228322500Z 
2021-01-08T21:44:04.228344300Z **TABLE OF combination_bp_meds REDACTED DUE TO SMALL N**
2021-01-08T21:44:04.228366200Z 
2021-01-08T21:44:04.228388000Z 
2021-01-08T21:44:04.228409900Z . replace combination_bp_meds=0 if combination_bp_meds<0 
2021-01-08T21:44:04.228436300Z (508 real changes made)
2021-01-08T21:44:04.228458400Z 
2021-01-08T21:44:04.228480400Z . replace combination_bp_meds=1 if combination_bp_meds>0 & combination_bp_meds!
2021-01-08T21:44:04.228502800Z > =.
2021-01-08T21:44:04.228524700Z (16,231 real changes made)
2021-01-08T21:44:04.228546600Z 
2021-01-08T21:44:04.228568400Z . safetab combination_bp_meds
2021-01-08T21:44:04.228590200Z 0
2021-01-08T21:44:04.228612100Z 
2021-01-08T21:44:04.228633800Z combination |
2021-01-08T21:44:04.228655700Z    _bp_meds |      Freq.     Percent        Cum.
2021-01-08T21:44:04.228677600Z ------------+-----------------------------------
2021-01-08T21:44:04.228699500Z           0 |      3,873       16.39       16.39
2021-01-08T21:44:04.228721400Z           1 |     19,755       83.61      100.00
2021-01-08T21:44:04.228743400Z ------------+-----------------------------------
2021-01-08T21:44:04.228765300Z       Total |     23,628      100.00
2021-01-08T21:44:04.228901400Z 
2021-01-08T21:44:04.228924300Z . 
2021-01-08T21:44:04.228946200Z . * BMI 
2021-01-08T21:44:04.228968000Z . * Set implausible BMIs to missing:
2021-01-08T21:44:04.228990000Z . replace bmi = . if !inrange(bmi, 15, 50)
2021-01-08T21:44:04.229011800Z (0 real changes made)
2021-01-08T21:44:04.229033700Z 
2021-01-08T21:44:04.229055500Z . 
2021-01-08T21:44:04.229077100Z . *GP consult count
2021-01-08T21:44:04.229098900Z . replace gp_consult_count=0 if gp_consult_count==. | gp_consult_count<0
2021-01-08T21:44:04.229120900Z (24,015 real changes made)
2021-01-08T21:44:04.229142800Z 
2021-01-08T21:44:04.229164500Z . summ gp_consult_count
2021-01-08T21:44:04.229186200Z 
2021-01-08T21:44:04.229214500Z     Variable |        Obs        Mean    Std. Dev.       Min        Max
2021-01-08T21:44:04.229236700Z -------------+---------------------------------------------------------
2021-01-08T21:44:04.229258700Z gp_consult~t |     78,865    2.476003    2.301164          0         12
2021-01-08T21:44:04.229280700Z 
2021-01-08T21:44:04.229302500Z . 
2021-01-08T21:44:04.229324500Z . /**** Create survival times  ****/
2021-01-08T21:44:04.229346400Z . * For looping later, name must be stime_binary_outcome_name
2021-01-08T21:44:04.229368200Z . 
2021-01-08T21:44:04.229389800Z . * Survival time = last followup date (first: deregistration date, end study, 
2021-01-08T21:44:04.229411800Z > death, or that outcome)
2021-01-08T21:44:04.229433800Z . *Ventilation does not have a survival time because it is a yes/no flag
2021-01-08T21:44:04.229455500Z . foreach i of global outcomes {
2021-01-08T21:44:04.229478600Z   2.         gen stime_`i' = min(`i'_censor_date, onsdeath_date, `i'_date, dere
2021-01-08T21:44:04.229505800Z > g_date)
2021-01-08T21:44:04.229684200Z   3. }
2021-01-08T21:44:04.229707000Z 
2021-01-08T21:44:04.229729000Z . 
2021-01-08T21:44:04.229751000Z . * If outcome occurs after censoring, set to zero
2021-01-08T21:44:04.229773100Z . foreach i of global outcomes {
2021-01-08T21:44:04.229874800Z   2.         replace `i'=0 if `i'_date>stime_`i'
2021-01-08T21:44:04.229901100Z   3.         tab `i'
2021-01-08T21:44:04.229923300Z   4. }
2021-01-08T21:44:04.229945100Z 
2021-01-08T21:44:04.229967000Z . 
2021-01-08T21:44:04.229988800Z . * Format date variables
2021-01-08T21:44:04.230010700Z . format  stime* %td 
2021-01-08T21:44:04.230032500Z variable stime* not found
2021-01-08T21:44:04.230054300Z r(111);
2021-01-08T21:44:04.230076300Z 
2021-01-08T21:44:04.230098100Z end of do-file
2021-01-08T21:44:04.230119900Z r(111);
2021-01-08T21:44:04.230141800Z 


state: failed
commit: none
docker_image_id: sha256:e4a676ff497b1550742032051cce1ba5502f65b172e86e4d82aadbaa1e056935
job_id: h3dning2wrny3zpm
run_by_user: None
created_at: 2021-01-08T21:42:07Z
started_at: 2021-01-08T21:43:39Z
completed_at: 2021-01-08T21:44:06Z

Job exited with an error code

outputs:
  logs/01_eth_cr_analysis_dataset.log  - moderately_sensitive